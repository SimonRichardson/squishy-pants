<!DOCTYPE html>

<html>
<head>
  <title>squishy-pants.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>squishy-pants.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="comment">/* Compiled : 2013-09-04 16:34 */</span>
(<span class="keyword">function</span>(global) {

    <span class="string">'use strict'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h3>Description</h3>
<p>  squishy-pants.js is a semi-serious functional programming library.</p>
<h3>Usage</h3>
<p>  node.js:</p>
<pre><code>  var squishy = require(&#39;squishy-pants&#39;);</code></pre>
<p>  Browser:</p>
<pre><code>  &lt;script src=&quot;squishy-pants.min.js&quot;&gt;&lt;/script&gt;</code></pre>
<h3>Development</h3>
<p>  Download the code with git:</p>
<pre><code>  git clone https://github.com/SimonRichardson/squishy-pants.git</code></pre>
<p>  Install the development dependencies with npm:</p>
<pre><code>  npm install</code></pre>
<p>  Run the tests with grunt:</p>
<pre><code>  npm test</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="comment">/* squishy pant's environment means `this` is special */</span>
    <span class="comment">/*jshint validthis: true*/</span>

    <span class="comment">/* squishy pants uses the !(this instanceof c) trick to remove `new` */</span>
    <span class="comment">/*jshint newcap: false*/</span>

    <span class="keyword">var</span> squishy;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h1>Environment</h1>
<p>  Environments are very important in squishy-pants. The library itself is
  implemented as a single environment.</p>
<p>  An environment holds methods and properties.</p>
<p>  Methods are implemented as multi-methods, which allow a form of
  <em>ad-hoc polymorphism</em>. Duck typing is another example of ad-hoc
  polymorphism, but only allows a single implementation at a time, via
  prototype mutation.</p>
<p>  A method instance is a product of a name, a predicate and an
  implementation:</p>
<pre><code>  var env = squishy.environment()
      .method(
          // Name
          &#39;negate&#39;,
          // Predicate
          function(n) {
              return typeof n == &#39;number&#39;;
          },
          // Implementation
          function(n) {
              return -n;
          }
      );

  env.negate(100) == -100;</code></pre>
<p>  We can now override the environment with Some more implementations:</p>
<pre><code>  var env2 = env
      .method(
          &#39;negate&#39;,
          function(b) {
              return typeof b == &#39;boolean&#39;;
          },
          function(b) {
              return !b;
          }
      );

  env2.negate(100) == -100;
  env2.negate(true) == false;</code></pre>
<p>  Environments are immutable; references to <code>env</code> won&#39;t see an
  implementation for boolean. The <code>env2</code> environment could have
  overwritten the implementation for number and code relying on <code>env</code>
  would still work.</p>
<p>  Properties can be accessed without dispatching on arguments. They
  can almost be thought of as methods with predicates that always
  return true:</p>
<pre><code>  var env = squishy.environment()
      .property(&#39;name&#39;, &#39;Squishy&#39;);

  env.name === &#39;Squishy&#39;;</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">findRegistered</span><span class="params">(name, registrations, args)</span> {</span>
        <span class="keyword">var</span> i,
            total;
    
        <span class="keyword">for</span>(i = <span class="number">0</span>, total = registrations.length; i &lt; total; i++) {
            <span class="keyword">if</span>(registrations[i].predicate.apply(<span class="keyword">this</span>, args))
                <span class="keyword">return</span> registrations[i].f;
        }
    
        <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'Method `'</span> + name + <span class="string">'` not implemented for this input'</span>);
    }
    
    <span class="function"><span class="keyword">function</span> <span class="title">makeMethod</span><span class="params">(name, registrations)</span> {</span>
        <span class="keyword">return</span> <span class="keyword">function</span>() {
            <span class="keyword">var</span> args = rest(arguments);
            <span class="keyword">return</span> findRegistered(name, registrations, args).apply(<span class="keyword">this</span>, args);
        };
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h2>environment(methods, properties)</h2>
<ul>
<li><code>method(name, predicate, f)</code> - adds an multimethod implementation</li>
<li><code>property(name, value)</code> - sets a property to value</li>
<li><code>isDefined(name)</code> - is a multimethod implement defined</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">environment</span><span class="params">(methods, properties)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, environment),
            i;
    
        methods = methods || {};
        properties = properties || {};
    
        self.method = <span class="keyword">function</span>(name, predicate, f) {
            <span class="keyword">var</span> newMethods = extend(methods, singleton(name, (methods[name] || []).concat({
                predicate: predicate,
                f: f
            })));
            <span class="keyword">return</span> environment(newMethods, properties);
        };
    
        self.property = <span class="keyword">function</span>(name, value) {
            <span class="keyword">var</span> newProperties = extend(properties, singleton(name, value));
            <span class="keyword">return</span> environment(methods, newProperties);
        };
    
        self.isDefined = <span class="keyword">function</span>(name) {
            <span class="keyword">return</span> self[name] &amp;&amp; functionName(self[name]) === name;
        };
    
        <span class="keyword">for</span>(i <span class="keyword">in</span> methods) {
            <span class="keyword">if</span>(self[i]) <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"Method `"</span> + i + <span class="string">"` already in environment."</span>);
            <span class="keyword">else</span> {
                <span class="comment">/* Make sure the methods are names */</span>
                <span class="keyword">var</span> method = makeMethod(i, methods[i]);
                method._name = i;
                self[i] = method;
            }
        }
    
        <span class="keyword">for</span>(i <span class="keyword">in</span> properties) {
            <span class="keyword">if</span>(self[i]) <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"Property `"</span> + i + <span class="string">"` already in environment."</span>);
            <span class="keyword">else</span> self[i] = properties[i];
        }
    
        <span class="keyword">return</span> self;
    }

    squishy = environment();
    squishy = squishy.property(<span class="string">'environment'</span>, environment);</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h1>Helpers</h1>
<p> The helpers module is a collection of functions used often inside
 of bilby.js or are generally useful for programs.</p>

            </div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h2>functionName(f)</h2>
<p> Returns the name of function <code>f</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">functionName</span><span class="params">(f)</span> {</span>
        <span class="keyword">return</span> f._name || f.name;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h2>functionLength(f)</h2>
<p> Returns the arity of function <code>f</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">functionLength</span><span class="params">(f)</span> {</span>
        <span class="keyword">return</span> f._length || f.length;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h2>create(proto)</h2>
<p> Partial polyfill for Object.create - creates a new instance of the
 given prototype.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">create</span><span class="params">(proto)</span> {</span>
        <span class="function"><span class="keyword">function</span> <span class="title">Ctor</span><span class="params">()</span> {</span>}
        Ctor.prototype = proto;
        <span class="keyword">return</span> <span class="keyword">new</span> Ctor();
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2>getInstance(self, constructor)</h2>
<p> Always returns an instance of constructor.</p>
<p> Returns self if it is an instanceof constructor, otherwise
 constructs an object with the correct prototype.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span><span class="params">(self, constructor)</span> {</span>
        <span class="keyword">return</span> self <span class="keyword">instanceof</span> constructor ? self : create(constructor.prototype);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h2>singleton(k, v)</h2>
<p> Creates a new single object using <code>k</code> as the key and <code>v</code> as the
 value. Useful for creating arbitrary keyed objects without
 mutation:</p>
<pre><code>  squishy.singleton([&#39;Hello&#39;, &#39;world&#39;].join(&#39; &#39;), 42) == {&#39;Hello world&#39;: 42}</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">singleton</span><span class="params">(k, v)</span> {</span>
        <span class="keyword">var</span> o = {};
        o[k] = v;
        <span class="keyword">return</span> o;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <h2>extend(a, b)</h2>
<p> Right-biased key-value concat of objects <code>a</code> and <code>b</code>:</p>
<pre><code>  squishy.extend({a: 1, b: 2}, {b: true, c: false}) == {a: 1, b: true, c: false}</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">extend</span><span class="params">(a, b)</span> {</span>
        <span class="keyword">var</span> rec = <span class="keyword">function</span>(a, b) {
            <span class="keyword">var</span> i;
            <span class="keyword">for</span>(i <span class="keyword">in</span> b) {
                a[i] = b[i];
            }
            <span class="keyword">return</span> a;
        };
        <span class="keyword">return</span> rec(rec({}, a), b);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h2>bind(f)(o)</h2>
<p> Makes <code>this</code> inside of <code>f</code> equal to <code>o</code>:</p>
<pre><code>  squishy.bind(function() { return this; })(a)() == a</code></pre>
<p> Also partially applies arguments:</p>
<pre><code>  squishy.bind(squishy.add)(null, 10)(32) == 42</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">bind</span><span class="params">(f)</span> {</span>
        <span class="function"><span class="keyword">function</span> <span class="title">curriedBind</span><span class="params">(o)</span> {</span>
            <span class="comment">/* If native bind doesn't exist, use a polyfill. */</span>
            <span class="keyword">var</span> args = [].slice.call(arguments, <span class="number">1</span>),
                g;
    
            <span class="keyword">if</span>(f.bind) g = f.bind.apply(f, [o].concat(args));
            <span class="keyword">else</span> {
                g = <span class="keyword">function</span>() {
                    <span class="keyword">return</span> f.apply(o, args.concat(rest(arguments)));
                };
            }
    
            <span class="comment">/*
               Let's try and associate all curried functions with the same name as the originator.
               Can't override length but can set _length for currying
            */</span>
            g._name = functionName(f);
            g._length = Math.max(functionLength(f) - args.length, <span class="number">0</span>);
    
            <span class="keyword">return</span> g;
        }
    
        <span class="comment">/* Manual currying since `curry` relies in bind. */</span>
        <span class="keyword">if</span>(arguments.length &gt; <span class="number">1</span>) <span class="keyword">return</span> curriedBind.apply(<span class="keyword">this</span>, [].slice.call(arguments, <span class="number">1</span>));
        <span class="keyword">else</span> <span class="keyword">return</span> curriedBind;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h2>curry(f)</h2>
<p> Takes a normal function <code>f</code> and allows partial application of its
 named arguments:</p>
<pre><code>  var add = bilby.curry(function(a, b) {
         return a + b;
     }),
     add15 = add(15);

  add15(27) == 42;</code></pre>
<p> Retains ability of complete application by calling the function
 when enough arguments are filled:</p>
<pre><code>  add(15, 27) == 42;</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">curry</span><span class="params">(f)</span> {</span>
        <span class="keyword">var</span> a = <span class="keyword">function</span>() {
            <span class="keyword">var</span> g = bind(f).apply(f, [<span class="keyword">this</span>].concat(rest(arguments)));
    
            <span class="keyword">if</span>(!functionLength(g)) <span class="keyword">return</span> g();
            <span class="keyword">else</span> <span class="keyword">return</span> curry(g);
        };
    
        <span class="comment">/*
           Let's try and associate all curried functions with the same name as the originator.
           Can't override length but can set _length for currying
        */</span>
        a._name = functionName(f);
        a._length = functionLength(f);
    
        <span class="keyword">return</span> a;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <h2>compose(f, g)</h2>
<p> Creates a new function that applies <code>f</code> to the result of <code>g</code> of the
 input argument:</p>
<pre><code>  forall f g x. compose(f, g)(x) == f(g(x))</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">compose</span><span class="params">(f, g)</span> {</span>
        <span class="keyword">return</span> <span class="keyword">function</span>() {
            <span class="keyword">return</span> f(g.apply(<span class="keyword">this</span>, rest(arguments)));
        };
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <h2>identity(o)</h2>
<p> Identity function. Returns <code>o</code>:</p>
<pre><code>  forall a. identity(a) == a</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">identity</span><span class="params">(o)</span> {</span>
        <span class="keyword">return</span> o;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <h2>constant(c)</h2>
<p> Constant function. Creates a function that always returns <code>c</code>, no
 matter the argument:</p>
<pre><code> forall a b. constant(a)(b) == a</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">constant</span><span class="params">(c)</span> {</span>
        <span class="keyword">return</span> <span class="keyword">function</span>() {
            <span class="keyword">return</span> c;
        };
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <h2>access(p)(o)</h2>
<p> Access a object property in a lazy fashion.</p>
<pre><code> access(&#39;prop&#39;)(object) == object[&#39;prop&#39;]</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> access = curry(<span class="keyword">function</span>(p, o) {
        <span class="keyword">return</span> o[p];
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <h2>andThen(g)(f)</h2>
<p> Lazy composition using currying.
 See: compose(f, g)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> andThen = curry(<span class="keyword">function</span>(g, f) {
        <span class="keyword">return</span> compose(f, g);
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <h2>sequence(a)(b)</h2>
<p> Lazy chaining of structures / containers together.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> sequence = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> squishy.chain(a, <span class="keyword">function</span>() {
            <span class="keyword">return</span> b;
        });
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <h2>minus(a)(b)</h2>
<p> Lazy concatenation of structures / containers together with negate.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> minus = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> squishy.concat(a, squishy.negate(b));
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <h2>flatten(a, [b])</h2>
<p> Flatten arguments passed via flatten into the function</p>
<pre><code> flatten(f, [1, 2]) == f.apply(null, [1, 2])</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> flatten = curry(<span class="keyword">function</span>(f, b) {
        <span class="keyword">return</span> f.apply(<span class="literal">null</span>, b);
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <h2>liftA2(f, a, b)</h2>
<p> Lifts a curried, binary function <code>f</code> into the applicative passes
 <code>a</code> and <code>b</code> as parameters.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">liftA2</span><span class="params">(f, a, b)</span> {</span>
        <span class="keyword">return</span> <span class="keyword">this</span>.ap(<span class="keyword">this</span>.map(a, f), b);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <h2>arrayOf(type)</h2>
<p> Sentinel value for when an array of a particular type is needed:</p>
<pre><code>  arrayOf(Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">arrayOf</span><span class="params">(type)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, arrayOf);
        self.type = type;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <h2>objectLike(props)</h2>
<p> Sentinel value for when an object with specified properties is
 needed:</p>
<pre><code>  objectLike({
      age: Number,
      name: String
  })</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">objectLike</span><span class="params">(props)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, objectLike);
        self.props = props;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <h2>or(a)(b)</h2>
<p> Curried function for <code>||</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> or = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> a || b;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <h2>and(a)(b)</h2>
<p> Curried function for <code>&amp;&amp;</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> and = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> a &amp;&amp; b;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <h2>add(a)(b)</h2>
<p> Curried function for <code>+</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> add = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> a + b;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <h2>times(a)(b)</h2>
<p> Curried function for <code>+</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> times = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> a * b;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <h2>strictEquals(a)(b)</h2>
<p> Curried function for <code>===</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> strictEquals = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> a === b;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <h2>not(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is not a valid value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">not</span><span class="params">(a)</span> {</span>
        <span class="keyword">return</span> !a;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <h2>error(s)</h2>
<p> Turns the <code>throw new Error(s)</code> statement into an expression.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">error</span><span class="params">(s)</span> {</span>
        <span class="keyword">return</span> <span class="keyword">function</span>() {
            <span class="keyword">throw</span> <span class="keyword">new</span> Error(s);
        };
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <h2>oneOf</h2>
<p> Selects one of the values at random.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">oneOf</span><span class="params">(a)</span> {</span>
        <span class="keyword">return</span> a[Math.floor(<span class="keyword">this</span>.randomRange(<span class="number">0</span>, a.length))];
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <h2>fill(s)(t)</h2>
<p> Curried function for filling array.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> fill = curry(<span class="keyword">function</span>(s, t) {
        <span class="keyword">return</span> <span class="keyword">this</span>.map(range(<span class="number">0</span>, s), t);
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <h2>range(a, b)</h2>
<p> Create an array with a given range (length).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">range</span><span class="params">(a, b)</span> {</span>
        <span class="keyword">var</span> total = b - a;
        <span class="keyword">var</span> rec = <span class="keyword">function</span>(x, y) {
            <span class="keyword">if</span> (y - a &gt;= total) <span class="keyword">return</span> x;
    
            x[y] = y++;
            <span class="keyword">return</span> rec(x, y);
        };
        <span class="keyword">return</span> rec([], a);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <h2>randomRange</h2>
<p> Returns a random number between the range.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">randomRange</span><span class="params">(a, b)</span> {</span>
        <span class="keyword">return</span> Math.random() * (b - a) + a;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <h2>inc</h2>
<p> Increments the number by 1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">inc</span><span class="params">(x)</span> {</span>
        <span class="keyword">return</span> x + <span class="number">1</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <h2>dec</h2>
<p> Decrement the number by 1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">dec</span><span class="params">(x)</span> {</span>
        <span class="keyword">return</span> x - <span class="number">1</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <h2>point</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">point</span><span class="params">(a)</span> {</span>
        <span class="keyword">return</span> a.of || a.constructor.of;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <h2>zero</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">zero</span><span class="params">(a)</span> {</span>
        <span class="keyword">return</span> a.empty || a.constructor.empty;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <h2>rest</h2>
<p> Convert the rest of the arguments to an array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">rest</span><span class="params">(args)</span> {</span>
        <span class="keyword">return</span> [].slice.call(args);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <h2>optional</h2>
<p> Optionally calls the function passed if it&#39;s not null. This is glue
 for calling methods that might not be set yet. If you&#39;re looking at this
 you should seriously consider using Option, which is a lot better at handling
 these sorts of issues.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="comment">/* Internal use only - not exposed */</span>
    <span class="function"><span class="keyword">function</span> <span class="title">optional</span><span class="params">(f)</span> {</span>
        <span class="keyword">return</span> <span class="keyword">function</span>() {
            <span class="keyword">return</span> f ? f.apply(<span class="literal">null</span>, rest(arguments)) : <span class="literal">null</span>;
        };
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <h2>nothing</h2>
<p> Empty function that can be called with no side affects and does nothing.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="comment">/* Internal use only - not exposed */</span>
    <span class="function"><span class="keyword">function</span> <span class="title">nothing</span><span class="params">()</span> {</span>}</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'functionName'</span>, functionName)
        .property(<span class="string">'functionLength'</span>, functionLength)
        .property(<span class="string">'create'</span>, create)
        .property(<span class="string">'getInstance'</span>, getInstance)
        .property(<span class="string">'singleton'</span>, singleton)
        .property(<span class="string">'extend'</span>, extend)
        .property(<span class="string">'bind'</span>, bind)
        .property(<span class="string">'curry'</span>, curry)
        .property(<span class="string">'compose'</span>, compose)
        .property(<span class="string">'identity'</span>, identity)
        .property(<span class="string">'constant'</span>, constant)
        .property(<span class="string">'access'</span>, access)
        .property(<span class="string">'andThen'</span>, andThen)
        .property(<span class="string">'sequence'</span>, sequence)
        .property(<span class="string">'minus'</span>, minus)
        .property(<span class="string">'flatten'</span>, flatten)
        .property(<span class="string">'liftA2'</span>, liftA2)
        .property(<span class="string">'arrayOf'</span>, arrayOf)
        .property(<span class="string">'objectLike'</span>, objectLike)
        .property(<span class="string">'or'</span>, or)
        .property(<span class="string">'and'</span>, and)
        .property(<span class="string">'add'</span>, add)
        .property(<span class="string">'strictEquals'</span>, strictEquals)
        .property(<span class="string">'times'</span>, times)
        .property(<span class="string">'not'</span>, not)
        .property(<span class="string">'error'</span>, error)
        .property(<span class="string">'oneOf'</span>, oneOf)
        .property(<span class="string">'fill'</span>, fill)
        .property(<span class="string">'range'</span>, range)
        .property(<span class="string">'randomRange'</span>, randomRange)
        .property(<span class="string">'inc'</span>, inc)
        .property(<span class="string">'dec'</span>, dec)
        .property(<span class="string">'point'</span>, point)
        .property(<span class="string">'zero'</span>, zero)
        .property(<span class="string">'rest'</span>, rest);</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <h1>partial</h1>
<p>  Methods are implemented as multi-methods, which allow a form of
  <em>ad-hoc polymorphism</em>. Duck typing is another example of ad-hoc
  polymorphism, but only allows a single implementation at a time, via
  prototype mutation.</p>
<p>  A method instance is a predicate and a implementation:</p>
<pre><code>  var partial = squishy.partial()
      .method(squishy.isEven, squishy.identity)
      .method(squishy.isOdd, squishy.negate),
      result = partial.call(null, 3);

  result === -3;</code></pre>
<ul>
<li><code>method(predicate, f)</code> - add a method with a predicate guard.</li>
<li><code>isDefinedAt()</code> - find if a method conforms to the predicate or not.</li>
<li><code>call(scope)</code> - call the method with a scope and series of arguments.</li>
<li><code>apply(scope, [])</code> - call the method with a scope and array of arguments.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">partial</span><span class="params">(methods)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, partial),
            i;
    
        methods = methods || [];
    
        self.method = <span class="keyword">function</span>(predicate, f) {
            <span class="keyword">var</span> newMethods = (methods || []).concat({
                predicate: predicate,
                f: f
            });
            <span class="keyword">return</span> partial(newMethods);
        };
    
        self.isDefinedAt = <span class="keyword">function</span>() {
            <span class="keyword">var</span> args = rest(arguments);
            <span class="keyword">return</span> exists(methods, <span class="keyword">function</span>(m) {
                <span class="keyword">return</span> m.predicate.apply(<span class="literal">null</span>, args);
            });
        };
    
        <span class="comment">/* Override function call to mask as a real function */</span>
        self.call = <span class="keyword">function</span>(scope) {
            <span class="keyword">return</span> self.apply(scope, rest(arguments).slice(<span class="number">1</span>));
        };
    
        <span class="comment">/* Override function apply to mask as a real function */</span>
        self.apply = <span class="keyword">function</span>(scope, args) {
            <span class="keyword">var</span> total,
                i;
    
            <span class="keyword">for</span> (i = <span class="number">0</span>, total = methods.length; i &lt; total; i++) {
                <span class="keyword">if</span> (methods[i].predicate.apply(scope, args)) {
                    <span class="keyword">return</span> methods[i].f.apply(scope, args);
                }
            }
    
            <span class="comment">/* Show we warn about the non-exhaustive check for arguments */</span>
            <span class="keyword">return</span> <span class="literal">null</span>;
        };
    
        <span class="comment">/* Override function length to mask as a real function */</span>
        self.length = <span class="number">1</span>;
        self._functionName = <span class="string">'partial'</span>;
    
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p> append methods to the squishy partial.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'partial'</span>, partial);</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <h2>isTypeOf(a)(b)</h2>
<p> Returns <code>true</code> if <code>b</code> has <code>typeof a</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isTypeOf = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> <span class="keyword">typeof</span> b === a;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <h2>isBoolean(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is a <code>Boolean</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isBoolean = isTypeOf(<span class="string">'boolean'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <h2>isFunction(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is a <code>Function</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isFunction = isTypeOf(<span class="string">'function'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <h2>isNumber(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is a <code>Number</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isNumber = isTypeOf(<span class="string">'number'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <h2>isObject(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is a <code>Object</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isObject = isTypeOf(<span class="string">'object'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <h2>isString(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is a <code>String</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isString = isTypeOf(<span class="string">'string'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <h2>isArray(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an <code>Array</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">isArray</span><span class="params">(a)</span> {</span>
        <span class="keyword">if</span>(Array.isArray) <span class="keyword">return</span> Array.isArray(a);
        <span class="keyword">else</span> <span class="keyword">return</span> Object.prototype.toString.call(a) === <span class="string">"[object Array]"</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <h2>isNull(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>null</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">isNull</span><span class="params">(a)</span> {</span>
        <span class="keyword">return</span> a === <span class="literal">null</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <h2>isUndefined(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>null</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">isUndefined</span><span class="params">(a)</span> {</span>
        <span class="keyword">return</span> a === <span class="keyword">void</span>(<span class="number">0</span>);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <h2>isNaN(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is a not a number including <code>NaN</code> and <code>Infinity</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">isNaN</span><span class="params">(a)</span> {</span>
        <span class="keyword">return</span> <span class="keyword">typeof</span> a === <span class="string">'number'</span> ? (a * <span class="number">0</span>) !== <span class="number">0</span> : <span class="literal">true</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <h2>isNotNaN(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is not a <code>NaN</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">isNotNaN</span><span class="params">(a)</span> {</span>
        <span class="keyword">return</span> !isNaN(a);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <h2>isEven(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is even.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">isEven</span><span class="params">(a)</span> {</span>
        <span class="keyword">return</span> (a &amp; <span class="number">1</span>) === <span class="number">0</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <h2>isOdd(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is odd.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">isOdd</span><span class="params">(a)</span> {</span>
        <span class="keyword">return</span> !isEven(a);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <h2>isPalindrome(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is a valid palindrome.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">isPalindrome</span><span class="params">(s)</span> {</span>
        <span class="keyword">var</span> total = s.length;
        <span class="keyword">if</span>(total &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="literal">true</span>;
        <span class="keyword">if</span>(s.charAt(<span class="number">0</span>) !== s.charAt(total - <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">false</span>;
    
        <span class="keyword">return</span> isPalindrome(s.substr(<span class="number">1</span>, total - <span class="number">2</span>));
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <h2>isInstanceOf(a)(b)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>b</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isInstanceOf = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> b <span class="keyword">instanceof</span> a;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <h2>isArrayOf(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>arrayOf</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isArrayOf = isInstanceOf(arrayOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <h2>isObjectLike(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>objectLike</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isObjectLike = isInstanceOf(objectLike);</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <h2>isAnyOf(a)(b)</h2>
<p> Returns <code>true</code> if <code>b</code> is any <code>strictEquals [a]</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isAnyOf = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">var</span> i;
    
        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; a.length; i++) {
            <span class="keyword">if</span>(strictEquals(a[i])(b)) {
                <span class="keyword">return</span> <span class="literal">true</span>;
            }
        }
    
        <span class="keyword">return</span> <span class="literal">false</span>;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <h2>isAnyTypeOf(a)(b)</h2>
<p> Returns <code>true</code> if <code>b</code> is any <code>typeof [a]</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isAnyTypeOf = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">var</span> i;
    
        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; a.length; i++) {
            <span class="keyword">if</span>(isTypeOf(a[i])(b)) {
                <span class="keyword">return</span> <span class="literal">true</span>;
            }
        }
    
        <span class="keyword">return</span> <span class="literal">false</span>;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <h2>isAnyInstanceOf(a)(b)</h2>
<p> Returns <code>true</code> if <code>b</code> is any <code>instanceof [a]</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isAnyInstanceOf = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">var</span> i;
    
        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; a.length; i++) {
            <span class="keyword">if</span>(isInstanceOf(a[i])(b)) {
                <span class="keyword">return</span> <span class="literal">true</span>;
            }
        }
    
        <span class="keyword">return</span> <span class="literal">false</span>;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <h2>isEnvironment(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>environment</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isEnvironment = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> isInstanceOf(environment, a);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <h2>isPartial(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>partial</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isPartial = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> isInstanceOf(partial, a);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <h3>isEmpty(a)</h3>
<p> Checks to see if a value is empty or not.</p>
<pre><code>  console.log(squishy.isEmpty([])); // Outputs `true`</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .method(<span class="string">'isEmpty'</span>, isBoolean, not)
        .method(<span class="string">'isEmpty'</span>, isFunction, not)
        .method(<span class="string">'isEmpty'</span>, isNumber, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> isNaN(a) || a &lt; <span class="number">1</span>;
        })
        .method(<span class="string">'isEmpty'</span>, isString, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> !<span class="regexp">/\S/</span>.test(a);
        })
        .method(<span class="string">'isEmpty'</span>, isArray, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a.length &lt; <span class="number">1</span>;
        })
        .method(<span class="string">'isEmpty'</span>, isObject, <span class="keyword">function</span>(a) {
            <span class="keyword">var</span> i,
                index;
    
            <span class="keyword">for</span>(i <span class="keyword">in</span> o) {
                index++;
            }
            <span class="keyword">return</span> index &lt; <span class="number">1</span>;
        })
        .method(<span class="string">'isEmpty'</span>, strictEquals(<span class="literal">null</span>), constant(<span class="literal">false</span>))
        .method(<span class="string">'isEmpty'</span>, strictEquals(<span class="literal">undefined</span>), constant(<span class="literal">false</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'isTypeOf'</span>, isTypeOf)
        .property(<span class="string">'isBoolean'</span>, isBoolean)
        .property(<span class="string">'isFunction'</span>, isFunction)
        .property(<span class="string">'isNumber'</span>, isNumber)
        .property(<span class="string">'isObject'</span>, isObject)
        .property(<span class="string">'isString'</span>, isString)
        .property(<span class="string">'isArray'</span>, isArray)
        .property(<span class="string">'isNaN'</span>, isNaN)
        .property(<span class="string">'isNotNaN'</span>, isNotNaN)
        .property(<span class="string">'isEven'</span>, isEven)
        .property(<span class="string">'isOdd'</span>, isOdd)
        .property(<span class="string">'isPalindrome'</span>, isPalindrome)
        .property(<span class="string">'isInstanceOf'</span>, isInstanceOf)
        .property(<span class="string">'isArrayOf'</span>, isArrayOf)
        .property(<span class="string">'isObjectLike'</span>, isObjectLike)
        .property(<span class="string">'isAnyOf'</span>, isAnyOf)
        .property(<span class="string">'isAnyTypeOf'</span>, isAnyTypeOf)
        .property(<span class="string">'isAnyInstanceOf'</span>, isAnyInstanceOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <h1>QuickCheck</h1>
<p> QuickCheck is a form of <em>automated specification testing</em>. Instead
 of manually writing tests cases like so:</p>
<pre><code>  assert(0 + 1 == 1);
  assert(1 + 1 == 2);
  assert(3 + 3 == 6);</code></pre>
<p> We can just write the assertion algebraicly and tell QuickCheck to
 automaticaly generate lots of inputs:</p>
<pre><code>  squishy.forAll(
      function(n) {
          return n + n == 2 * n;
      },
      [Number]
  ).fold(
      function(fail) {
          return &quot;Failed after &quot; + fail.tries + &quot; tries: &quot; + fail.inputs.toString();
      },
      &quot;All tests passed!&quot;,
  )</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">generateInputs</span><span class="params">(env, args, size)</span> {</span>
        <span class="keyword">return</span> env.map(args, <span class="keyword">function</span>(arg) {
            <span class="keyword">return</span> env.arb(arg, size);
        });
    }
    
    <span class="function"><span class="keyword">function</span> <span class="title">findSmallest</span><span class="params">(env, property, inputs)</span> {</span>
        <span class="keyword">var</span> shrunken = env.map(inputs, env.shrink),
            smallest = [].concat(inputs),
            args,
            i,
            j;
    
        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; shrunken.length; i++) {
            args = [].concat(smallest);
            <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; shrunken[i].length; j++) {
                args[i] = shrunken[i][j];
                <span class="keyword">if</span>(property.apply(<span class="keyword">this</span>, args))
                    <span class="keyword">break</span>;
                smallest[i] = shrunken[i][j];
            }
        }
    
        <span class="keyword">return</span> smallest;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <h3>failureReporter</h3>
<ul>
<li>inputs - the arguments to the property that failed</li>
<li>tries - number of times inputs were tested before Failure</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">failureReporter</span><span class="params">(inputs, tries)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, failureReporter);
        self.inputs = inputs;
        self.tries = tries;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <h2>forAll(property, args)</h2>
<p> Generates values for each type in <code>args</code> using <code>squishy.arb</code> and
 then passes them to <code>property</code>, a function returning a
 <code>Boolean</code>. Tries <code>goal</code> number of times or until Failure.</p>
<p> Returns an <code>Option</code> of a <code>failureReporter</code>:</p>
<pre><code>  var reporter = squishy.forAll(
      function(s) {
          return isPalindrome(s + s.split(&#39;&#39;).reverse().join(&#39;&#39;));
      },
      [String]
  );</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">forAll</span><span class="params">(property, args)</span> {</span>
        <span class="keyword">var</span> inputs,
            i;
    
        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.goal; i++) {
            inputs = generateInputs(<span class="keyword">this</span>, args, i);
            <span class="keyword">if</span>(!property.apply(<span class="keyword">this</span>, inputs)) {
                <span class="keyword">return</span> Option.Some(failureReporter(
                    findSmallest(<span class="keyword">this</span>, property, inputs),
                    i + <span class="number">1</span>
                ));
            }
        }
    
        <span class="keyword">return</span> Option.None;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <h2>goal</h2>
<p> The number of Successful inputs necessary to declare the whole
 property a Success:</p>
<pre><code>  var _ = squishy.property(&#39;goal&#39;, 1000);</code></pre>
<p> Default is <code>100</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> goal = <span class="number">20</span>;<span class="comment">//00;</span></pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <h2>AnyVal</h2>
<p> Sentinel value for when any type of primitive value is needed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> AnyVal = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <h2>OptionalVal</h2>
<p> Sentinel value for when any type of primitive value that is optionally needed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> OptionalVal = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <h2>Char</h2>
<p> Sentinel value for when a single character string is needed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> Char = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <h2>Integer</h2>
<p> Sentinel value for when a integer is needed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> Integer = {};
    
    squishy = squishy
        .property(<span class="string">'generateInputs'</span>, generateInputs)
        .property(<span class="string">'failureReporter'</span>, failureReporter)
        .property(<span class="string">'forAll'</span>, forAll)
        .property(<span class="string">'goal'</span>, goal)
        .property(<span class="string">'AnyVal'</span>, AnyVal)
        .property(<span class="string">'OptionalVal'</span>, OptionalVal)
        .property(<span class="string">'Char'</span>, Char)
        .property(<span class="string">'Integer'</span>, Integer);</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <h3>arbitrary values</h3>
<p> Creates an arbitrary value depending on the type.</p>
<pre><code>  console.log(squishy.arb(Number)); // Outputs a random number</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .method(<span class="string">'arb'</span>, strictEquals(AnyVal), <span class="keyword">function</span>(a, s) {
            <span class="keyword">var</span> types = [Boolean, Number, String];
            <span class="keyword">return</span> <span class="keyword">this</span>.arb(<span class="keyword">this</span>.oneOf(types), s - <span class="number">1</span>);
        })
        .method(<span class="string">'arb'</span>, strictEquals(Array), <span class="keyword">function</span>(a, s) {
            <span class="keyword">return</span> <span class="keyword">this</span>.arb(arrayOf(AnyVal), s - <span class="number">1</span>);
        })
        .method(<span class="string">'arb'</span>, strictEquals(Boolean), <span class="keyword">function</span>(a, s) {
            <span class="keyword">return</span> Math.random() &lt; <span class="number">0.5</span>;
        })
        .method(<span class="string">'arb'</span>, strictEquals(Char), <span class="keyword">function</span>(a, s) {
            <span class="comment">/* Should consider 127 (DEL) to be quite dangerous? */</span>
            <span class="keyword">return</span> String.fromCharCode(Math.floor(<span class="keyword">this</span>.randomRange(<span class="number">32</span>, <span class="number">255</span>)));
        })
        .method(<span class="string">'arb'</span>, strictEquals(Integer), <span class="keyword">function</span>(a, s) {
            <span class="keyword">var</span> variance = Math.pow(<span class="number">2</span>, <span class="number">32</span>) - <span class="number">1</span>;
            <span class="keyword">return</span> Math.floor(<span class="keyword">this</span>.randomRange(-variance, variance));
        })
        .method(<span class="string">'arb'</span>, strictEquals(Function), <span class="keyword">function</span>(a, s) {
            <span class="keyword">return</span> nothing;
        })
        .method(<span class="string">'arb'</span>, isArrayOf, <span class="keyword">function</span>(a, s) {
            <span class="keyword">var</span> accum = [],
                length = <span class="keyword">this</span>.randomRange(<span class="number">0</span>, s),
                i;
    
            <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; length; i++) {
                accum.push(<span class="keyword">this</span>.arb(a.type, s - <span class="number">1</span>));
            }
    
            <span class="keyword">return</span> accum;
        })
        .method(<span class="string">'arb'</span>, isObjectLike, <span class="keyword">function</span>(a, s) {
            <span class="keyword">var</span> isOptionalVal = strictEquals(OptionalVal),
                o = {},
                i;
    
            <span class="keyword">for</span>(i <span class="keyword">in</span> a.props) {
                <span class="keyword">var</span> opt = isOptionalVal(a.props[i]);
                <span class="keyword">if</span> (!opt || opt &amp;&amp; <span class="keyword">this</span>.randomRange(<span class="number">0</span>, <span class="number">1</span>) &lt;= <span class="number">0.5</span>) {
                    o[i] = <span class="keyword">this</span>.arb(opt ? AnyVal : a.props[i], s);
                }
            }
    
            <span class="keyword">return</span> o;
        })
        .method(<span class="string">'arb'</span>, strictEquals(Number), <span class="keyword">function</span>(a, s) {
            <span class="comment">/*
              Divide the Number.MAX_VALUE by the goal, so we don't get
              a Number overflow (worst case Infinity), meaning we can
              add multiple arb(Number) together without issues.
            */</span>
            <span class="keyword">var</span> variance = Math.pow(<span class="number">2</span>, <span class="number">53</span>) / <span class="keyword">this</span>.goal;
            <span class="keyword">return</span> <span class="keyword">this</span>.randomRange(-variance, variance);
        })
        .method(<span class="string">'arb'</span>, strictEquals(Object), <span class="keyword">function</span>(a, s) {
            <span class="keyword">var</span> o = {},
                length = <span class="keyword">this</span>.randomRange(<span class="number">0</span>, s),
                i;
    
            <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; length; i++) {
                o[<span class="keyword">this</span>.arb(String, s - <span class="number">1</span>)] = <span class="keyword">this</span>.arb(arrayOf(AnyVal), s - <span class="number">1</span>);
            }
    
            <span class="keyword">return</span> o;
        })
        .method(<span class="string">'arb'</span>, strictEquals(String), <span class="keyword">function</span>(a, s) {
            <span class="keyword">return</span> <span class="keyword">this</span>.arb(arrayOf(Char), s - <span class="number">1</span>).join(<span class="string">''</span>);
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <h3>shrink values</h3>
<p> Shrinks values for utilizing against checking values.</p>
<pre><code>  console.log(squishy.shrink([1, 2, 3, 4])); // [[1, 2, 3, 4], [1, 2, 3]]</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .method(<span class="string">'shrink'</span>, isArray, <span class="keyword">function</span>(a) {
            <span class="keyword">var</span> accum = [[]],
                x = a.length;
    
            <span class="keyword">while</span>(x) {
                x = Math.floor(x / <span class="number">2</span>);
    
                <span class="keyword">if</span> (x) accum.push(a.slice(a.length = x));
            }
    
            <span class="keyword">return</span> accum;
        })
        .method(<span class="string">'shrink'</span>, isBoolean, <span class="keyword">function</span>(b) {
            <span class="keyword">return</span> b ? [<span class="literal">false</span>] : [];
        })
        .method(<span class="string">'shrink'</span>, isNumber, <span class="keyword">function</span>(n) {
            <span class="keyword">var</span> accum = [<span class="number">0</span>],
                x = n;
    
            <span class="keyword">if</span> (n &lt; <span class="number">0</span>) accum.push(-n);
    
            <span class="keyword">while</span>(x) {
                x = x / <span class="number">2</span>;
                x = x &lt; <span class="number">0</span> ? Math.ceil(x) : Math.floor(x);
    
                <span class="keyword">if</span> (x) accum.push(n - x);
            }
    
            <span class="keyword">return</span> accum;
        })
        .method(<span class="string">'shrink'</span>, isString, <span class="keyword">function</span>(s) {
            <span class="keyword">var</span> accum = [<span class="string">''</span>],
                x = s.length;
    
            <span class="keyword">while</span>(x) {
                x = Math.floor(x / <span class="number">2</span>);
    
                <span class="keyword">if</span> (x) accum.push(s.substring(<span class="number">0</span>, s.length - x));
            }
    
            <span class="keyword">return</span> accum;
        });

    squishy = squishy
        .method(<span class="string">'map'</span>, isFunction, curry(<span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> compose(b, a);
        }))
        .method(<span class="string">'concat'</span>, isFunction, curry(<span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a().concat(b());
        }))
        .method(<span class="string">'ap'</span>, isFunction, curry(<span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> a(x)(b(x));
            };
        }));
    
    squishy = squishy
        .method(<span class="string">'kleisli'</span>, isFunction, <span class="keyword">function</span>(a, b) {
            <span class="keyword">var</span> env = <span class="keyword">this</span>;
            <span class="keyword">return</span> <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> env.chain(a(x), b);
            };
        });
    
    squishy = squishy
        .method(<span class="string">'concat'</span>, isBoolean, curry(<span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a &amp; b;
        }))
        .method(<span class="string">'concat'</span>, squishy.liftA2(or, isNumber, isString), curry(<span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a + b;
        }))
        .method(<span class="string">'map'</span>, isBoolean, curry(<span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> b(a);
        }))
        .method(<span class="string">'map'</span>, squishy.liftA2(or, isNumber, isString), curry(<span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> b(a);
        }))
        .method(<span class="string">'negate'</span>, isBoolean, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> !a;
        })
        .method(<span class="string">'negate'</span>, isNumber, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> -a;
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <h3>equal(a, b)</h3>
<p> Checks to see if a type equals another type. This is a uses deep equality for
 complex structures like <code>object</code> and <code>array</code>s.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .method(<span class="string">'equal'</span>, isNull, strictEquals)
        .method(<span class="string">'equal'</span>, isBoolean, strictEquals)
        .method(<span class="string">'equal'</span>, isFunction, strictEquals)
        .method(<span class="string">'equal'</span>, isNumber, strictEquals)
        .method(<span class="string">'equal'</span>, isString, strictEquals)
        .method(<span class="string">'equal'</span>, isArray, <span class="keyword">function</span>(a, b) {
            <span class="keyword">var</span> env = <span class="keyword">this</span>;
            <span class="comment">/* We need to be sure that the lengths do actually match here. */</span>
            <span class="keyword">if</span> (and(a, b) &amp;&amp; isArray(b) &amp;&amp; strictEquals(a.length, b.length)) {
                <span class="keyword">return</span> env.fold(env.zip(a, b), <span class="literal">true</span>, <span class="keyword">function</span>(v, t) {
                    <span class="keyword">return</span> v &amp;&amp; env.equal(t._1, t._2);
                });
            }
            <span class="keyword">return</span> <span class="literal">false</span>;
        })
        .method(<span class="string">'equal'</span>, strictEquals(<span class="literal">undefined</span>), strictEquals)
        .property(<span class="string">'expect'</span>, <span class="keyword">function</span>(a) {
            <span class="keyword">var</span> env = <span class="keyword">this</span>;
            <span class="keyword">return</span> singleton(<span class="string">'toBe'</span>,
                <span class="function"><span class="keyword">function</span> <span class="params">(b)</span> {</span>
                    <span class="keyword">return</span> env.equal(b, a);
                }
            );
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <h3>of(a)</h3>
<p> Creates a value from the type.</p>
<p> The left identity of <code>squishy.of(m, a).chain(f)</code> is equivalent to
 <code>f(squishy.of(m, a))</code> and then equivalent of <code>f(a)</code> without using <code>squishy.of</code>.
 Similarly the right identity of <code>squishy.chain(m, m.of)</code> is equivalent to
 <code>m</code> or <code>m.chain(m.of)</code> without using <code>squishy.of</code>.</p>
<pre><code>  console.log(squishy.of(Array, [1, 2, 3])); // Outputs `[1, 2, 3]`</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .method(<span class="string">'of'</span>, strictEquals(AnyVal), <span class="keyword">function</span>() {
            <span class="keyword">var</span> types = [Boolean, Number, String];
            <span class="keyword">return</span> <span class="keyword">this</span>.of(<span class="keyword">this</span>.oneOf(types));
        })
        .method(<span class="string">'of'</span>, strictEquals(Array), identity)
        .method(<span class="string">'of'</span>, strictEquals(Boolean), identity)
        .method(<span class="string">'of'</span>, strictEquals(Function), identity)
        .method(<span class="string">'of'</span>, strictEquals(Number), identity)
        .method(<span class="string">'of'</span>, strictEquals(Object), identity)
        .method(<span class="string">'of'</span>, strictEquals(String), identity);</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <h3>empty()</h3>
<p> Creates an empty value depending on the type. Each resulting value
 will be classified as falsy for the type. Boolean will be
 <code>false</code> and Array will be an empty <code>[]</code> for example.</p>
<pre><code>  console.log(squishy.empty(Array)); // Outputs `[]`</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .method(<span class="string">'empty'</span>, strictEquals(AnyVal), <span class="keyword">function</span>() {
            <span class="keyword">var</span> types = [Boolean, Number, String];
            <span class="keyword">return</span> <span class="keyword">this</span>.empty(<span class="keyword">this</span>.oneOf(types));
        })
        .method(<span class="string">'empty'</span>, strictEquals(Array), <span class="keyword">function</span>() {
            <span class="keyword">return</span> [];
        })
        .method(<span class="string">'empty'</span>, strictEquals(Boolean), <span class="keyword">function</span>() {
            <span class="keyword">return</span> <span class="literal">false</span>;
        })
        .method(<span class="string">'empty'</span>, strictEquals(Function), <span class="keyword">function</span>() {
            <span class="keyword">return</span> <span class="keyword">function</span>() {};
        })
        .method(<span class="string">'empty'</span>, strictEquals(Number), <span class="keyword">function</span>() {
            <span class="keyword">return</span> <span class="number">0</span>;
        })
        .method(<span class="string">'empty'</span>, strictEquals(Object), <span class="keyword">function</span>() {
            <span class="keyword">return</span> {};
        })
        .method(<span class="string">'empty'</span>, strictEquals(String), <span class="keyword">function</span>() {
            <span class="keyword">return</span> <span class="string">''</span>;
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <h2>tagged(name, fields)</h2>
<p> Creates a simple constructor for a tagged object.</p>
<pre><code>  var Tuple = tagged(&#39;Tuple&#39;, [&#39;a&#39;, &#39;b&#39;]);
  var x = Tuple(1, 2);
  var y = new Tuple(3, 4);
  x instanceof Tuple &amp;&amp; y instanceof Tuple;</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">tagged</span><span class="params">(name, fields)</span> {</span>
        <span class="function"><span class="keyword">function</span> <span class="title">wrapped</span><span class="params">()</span> {</span>
            <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, wrapped),
                total = fields.length,
                i;
            <span class="keyword">if</span>(arguments.length != total) {
                <span class="keyword">throw</span> <span class="keyword">new</span> TypeError(<span class="string">"Expected "</span> + fields.length + <span class="string">" arguments, got "</span> + arguments.length);
            }
            <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; total; i++) {
                self[fields[i]] = arguments[i];
            }
            <span class="keyword">return</span> self;
        }
    
        <span class="comment">/* Make sure the tagged are named */</span>
        wrapped._name = name;
        wrapped._length = fields.length;
    
        <span class="keyword">return</span> wrapped;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <h2>taggedSum(constructors)</h2>
<p> Creates a disjoint union of constructors, with a catamorphism.</p>
<pre><code>   var List = taggedSum({
       Cons: [&#39;car&#39;, &#39;cdr&#39;],
       Nil: []
   });
   function listLength(l) {
       return l.match({
           Cons: function(car, cdr) {
               return 1 + listLength(cdr);
           },
           Nil: function() {
               return 0;
           }
       });
   }
   listLength(List.Cons(1, new List.Cons(2, List.Nil()))) == 2;</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">taggedSum</span><span class="params">(name, constructors)</span> {</span>
        <span class="keyword">var</span> key, proto;
    
        <span class="function"><span class="keyword">function</span> <span class="title">definitions</span><span class="params">()</span> {</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> TypeError(<span class="string">'Tagged sum was called instead of one of its properties.'</span>);
        }
    
        <span class="function"><span class="keyword">function</span> <span class="title">constructFields</span><span class="params">(o, fields)</span> {</span>
            <span class="keyword">var</span> args = [],
                total,
                i;
    
            <span class="keyword">for</span>(i = <span class="number">0</span>, total = fields.length; i &lt; total; i++) {
                args.push(o[fields[i]]);
            }
    
            <span class="keyword">return</span> args;
        }
    
        <span class="function"><span class="keyword">function</span> <span class="title">constructMatch</span><span class="params">(key)</span> {</span>
            <span class="keyword">return</span> <span class="keyword">function</span>(dispatches) {
                <span class="keyword">var</span> fields = constructors[key],
                    accessor = dispatches[key],
                    args = constructFields(<span class="keyword">this</span>, fields),
                    total,
                    first,
                    opt,
                    i, j;
    
                <span class="keyword">if</span>(!accessor) {
                    <span class="keyword">throw</span> <span class="keyword">new</span> TypeError(<span class="string">"Constructors given to match didn't include: "</span> + key);
                }
    
                <span class="comment">/*
                    Work out if the accessor is an object then if it's a partial
                    definition call that, otherwise see if we can do a recursive pattern
                    match over the first argument.
                */</span>
                <span class="keyword">if</span> (args.length &gt; <span class="number">0</span> &amp;&amp; isObject(accessor) &amp;&amp; !isPartial(accessor)) {
                    <span class="comment">/* Possible instance of a taggedSum */</span>
                    first = args[<span class="number">0</span>];
    
                    <span class="keyword">if</span> (accessor[functionName(first)]) {
                        opt = {};
    
                        <span class="keyword">for</span> (j <span class="keyword">in</span> first._constructors) {
                            opt[j] = accessor[j];
                        }
    
                        <span class="keyword">return</span> first.match(opt);
                    }
    
                    <span class="keyword">throw</span> <span class="keyword">new</span> TypeError(<span class="string">'Constructor not found: '</span> + key);
                }
    
                <span class="keyword">return</span> accessor.apply(<span class="keyword">this</span>, args);
            };
        }
    
        <span class="function"><span class="keyword">function</span> <span class="title">makeProto</span><span class="params">(key, constructors)</span> {</span>
            <span class="keyword">var</span> proto = create(definitions.prototype);
            proto.match = constructMatch(key);
    
            <span class="comment">/*
                Make sure the taggedSum are named
                Pass the constructors around so we can then do recursive matching.
            */</span>
            proto._name = key;
            proto._constructors = constructors;
    
            <span class="keyword">return</span> proto;
        }
    
        <span class="keyword">for</span>(key <span class="keyword">in</span> constructors) {
            <span class="keyword">if</span>(!constructors[key].length) {
                definitions[key] = makeProto(key, definitions);
                <span class="keyword">continue</span>;
            }
    
            definitions[key] = tagged(key, constructors[key]);
            definitions[key].prototype = makeProto(key, constructors);
        }
    
        definitions._name = name;
    
        <span class="keyword">return</span> definitions;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'tagged'</span>, tagged)
        .property(<span class="string">'taggedSum'</span>, taggedSum);</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <h1>Array</h1>
<pre><code>   Array a</code></pre>
<p>  Represents a sequence of values that are indexed by integers.</p>
<ul>
<li><code>ap(a, b)</code> - Applicative ap(ply)</li>
<li><code>chain(a, f)</code> - Applies the given function f to each element of this array, then concatenates the results.</li>
<li><code>concat(a, b)</code> - Appends two array objects.</li>
<li><code>count(a, f)</code> - Count the number of elements in the array which satisfy a predicate.</li>
<li><code>drop(a, n)</code> - Returns the array without its n first elements. If this array has less than n elements, the empty array is returned.</li>
<li><code>dropRight(a, n)</code> - Returns the array without its rightmost <code>n</code> elements.</li>
<li><code>dropWhile(a, f)</code> - Returns the longest suffix of this array whose first element does not satisfy the predicate.</li>
<li><code>exists(a, f)</code> - Tests the existence in this array of an element that satisfies the predicate.</li>
<li><code>filter(a, f)</code> - Returns all the elements of this array that satisfy the predicate p.</li>
<li><code>flatten(a)</code> - Concatenate the elements of this array.</li>
<li><code>fold(a, v, f)</code> - Combines the elements of this array together using the binary function f, from Left to Right, and starting with the value v.</li>
<li><code>foldRight(a, v, f)</code> - Combines the elements of this array together using the binary function f, from Right to Left, and starting with the value v.</li>
<li><code>map(a, f)</code> - Returns the array resulting from applying the given function f to each element of this array.</li>
<li><code>partition(a, f)</code> - Partition the array in two sub-arrays according to a predicate.</li>
<li><code>reduce(a, f)</code> - Combines the elements of this array together using the binary operator op, from Left to Right</li>
<li><code>reduceRight(a, f)</code> - Combines the elements of this array together using the binary operator op, from Right to Left</li>
<li><code>take(n)</code> - Returns the n first elements of this array.</li>
<li><code>takeRight(n)</code> - Returns the rightmost n elements from this array.</li>
<li><code>takeWhile(f)</code> - Returns the longest prefix of this array whose elements satisfy the predicate.</li>
<li><code>zip(a, b)</code> - Returns a array formed from this array and the specified array that by associating each element of the former with the element at the same position in the latter.</li>
<li><code>zipWithIndex(a)</code> -  Returns a array form from this array and a index of the value that is associated with each element index position.</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <h3>ap(b, [concat])</h3>
<p> Apply a function in the applicative of each function
 Applicative ap(ply)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> ap = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">var</span> accum = [],
            x = a.length,
            y = b.length,
            i,
            j;
    
        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; x; i++) {
            <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; y; j++) {
                accum.push(a[i](b[j]));
            }
        }
    
        <span class="keyword">return</span> accum;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Applies the given function f to each element of this array, then
 concatenates the results.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> chain = curry(<span class="keyword">function</span>(a, f) {
        <span class="keyword">var</span> accum = [],
            total,
            i;
    
        <span class="keyword">for</span> (i = <span class="number">0</span>, total = a.length; i &lt; total; i++) {
            accum = accum.concat(f(a[i]));
        }
    
        <span class="keyword">return</span> accum;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <h3>concat(b)</h3>
<p> Appends two array objects.
 semigroup concat</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> concat = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> a.concat(b);
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <h3>count(f)</h3>
<p> Count the number of elements in the array which satisfy a predicate.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> count = curry(<span class="keyword">function</span>(a, f) {
        <span class="keyword">var</span> accum = <span class="number">0</span>,
            total,
            i;
    
        <span class="keyword">for</span> (i = <span class="number">0</span>, total = a.length; i &lt; total; i++) {
            <span class="keyword">if</span>(f(a[i])) {
                accum = inc(accum);
            }
        }
    
        <span class="keyword">return</span> accum;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <h3>drop(f)</h3>
<p> Returns the array without its n first elements. If this array has
 less than n elements, the empty array is returned.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> drop = curry(<span class="keyword">function</span>(a, n) {
        <span class="keyword">return</span> a.slice(n);
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <h3>dropRight(n)</h3>
<p> Returns the array without its rightmost <code>n</code> elements.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> dropRight = curry(<span class="keyword">function</span>(a, n) {
        <span class="keyword">return</span> a.slice(<span class="number">0</span>, -n);
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <h3>dropWhile(f)</h3>
<p> Returns the longest suffix of this array whose first element
 does not satisfy the predicate.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> dropWhile = curry(<span class="keyword">function</span>(a, f) {
        <span class="keyword">var</span> total,
            i;
    
        <span class="keyword">for</span> (i = <span class="number">0</span>, total = a.length; i &lt; total; i++) {
            <span class="keyword">if</span>(!f(a[i])) {
                <span class="keyword">return</span> a.slice(i);
            }
        }
    
        <span class="keyword">return</span> a.slice();
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <h3>exists(f)</h3>
<p> Tests the existence in this array of an element that satisfies
 the predicate.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> exists = curry(<span class="keyword">function</span>(a, f) {
        <span class="keyword">var</span> total,
            i;
    
        <span class="keyword">for</span> (i = <span class="number">0</span>, total = a.length; i &lt; total; i++) {
            <span class="keyword">if</span>(f(a[i])) {
                <span class="keyword">return</span> <span class="literal">true</span>;
            }
        }
    
        <span class="keyword">return</span> <span class="literal">false</span>;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <h3>filter(f)</h3>
<p> Returns all the elements of this array that satisfy the predicate p.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> filter = curry(<span class="keyword">function</span>(a, f) {
        <span class="keyword">var</span> accum = [],
            total,
            i;
    
        <span class="keyword">for</span> (i = <span class="number">0</span>, total = a.length; i &lt; total; i++) {
            <span class="keyword">if</span> (f(a[i])) {
                accum.push(a[i]);
            }
        }
    
        <span class="keyword">return</span> accum;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <h3>fold(v, f)</h3>
<p> Combines the elements of this array together using the binary function f,
 from Left to Right, and starting with the value v.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> fold = curry(<span class="keyword">function</span>(a, v, f) {
        <span class="keyword">var</span> total,
            i;
    
        <span class="keyword">for</span> (i = <span class="number">0</span>, total = a.length; i &lt; total; i++) {
            v = f(v, a[i]);
        }
    
        <span class="keyword">return</span> v;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <h3>foldRight(v, f)</h3>
<p> Combines the elements of this array together using the binary function f,
 from Right to Left, and starting with the value v.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> foldRight = curry(<span class="keyword">function</span>(a, v, f) {
        <span class="keyword">var</span> i;
    
        <span class="keyword">for</span> (i = a.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) {
            v = f(v, a[i]);
        }
    
        <span class="keyword">return</span> v;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <h3>map(f)</h3>
<p> Returns the array resulting from applying the given function f to each
 element of this array.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> map = curry(<span class="keyword">function</span>(a, f) {
        <span class="keyword">var</span> accum = [],
            total,
            i;
    
        <span class="keyword">for</span> (i = <span class="number">0</span>, total = a.length; i &lt; total; i++) {
            accum[i] = f(a[i]);
        }
    
        <span class="keyword">return</span> accum;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <h3>partition(f)</h3>
<p> Partition the array in two sub-arrays according to a predicate.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> partition = curry(<span class="keyword">function</span>(a, f) {
        <span class="keyword">var</span> left = [],
            right = [],
            total,
            i;
    
        <span class="keyword">for</span> (i = <span class="number">0</span>, total = a.length; i &lt; total; i++) {
            <span class="keyword">if</span>(f(a[i])) left.push(a[i]);
            <span class="keyword">else</span> right.push(a[i]);
        }
    
        <span class="keyword">return</span> Tuple2(left, right);
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <h3>reduce(f)</h3>
<p> Combines the elements of this array together using the binary operator
 op, from Left to Right</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> reduce = curry(<span class="keyword">function</span>(a, f) {
        <span class="keyword">var</span> v = a[<span class="number">0</span>] || <span class="literal">null</span>,
            total,
            i;
    
        <span class="keyword">for</span> (i = <span class="number">1</span>, total = a.length; i &lt; total; i++) {
            v = f(v, a[i]);
        }
    
        <span class="keyword">return</span> v;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <h3>reduceRight(f)</h3>
<p> Combines the elements of this array together using the binary operator
 op, from Right to Left</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> reduceRight = curry(<span class="keyword">function</span>(a, f) {
        <span class="keyword">var</span> total = a.length,
            v = a[total - <span class="number">1</span>] || <span class="literal">null</span>,
            i;
    
        <span class="keyword">for</span> (i = total - <span class="number">2</span>; i &gt;= <span class="number">0</span>; --i) {
            v = f(v, a[i]);
        }
    
        <span class="keyword">return</span> v;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <h3>take(v, f)</h3>
<p> Returns the n first elements of this array.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> take = curry(<span class="keyword">function</span>(a, m) {
        <span class="keyword">return</span> a.slice(<span class="number">0</span>, m);
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <h3>takeRight(n)</h3>
<p> Returns the rightmost n elements from this array.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> takeRight = curry(<span class="keyword">function</span>(a, n) {
        <span class="keyword">return</span> a.slice(-n);
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <h3>takeWhile(v, f)</h3>
<p> Returns the longest prefix of this array whose elements satisfy
 the predicate.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> takeWhile = curry(<span class="keyword">function</span>(a, f) {
        <span class="keyword">var</span> total,
            i;
    
        <span class="keyword">for</span> (i = <span class="number">0</span>, total = a.length; i &lt; total; i++) {
            <span class="keyword">if</span>(!f(a[i])) {
                <span class="keyword">return</span> a.slice(<span class="number">0</span>, i);
            }
        }
    
        <span class="keyword">return</span> [];
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <h3>zip(b)</h3>
<p> Returns a array formed from this array and the specified array that
 by associating each element of the former with the element at the same
 position in the latter.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> zip = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">var</span> accum = [],
            total = Math.min(a.length, b.length),
            i;
    
        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; total; i++) {
            accum[i] = Tuple2(a[i], b[i]);
        }
    
        <span class="keyword">return</span> accum;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <h3>zipWithIndex()</h3>
<p> Returns a array form from this array and a index of the value that
 is associated with each element index position.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> zipWithIndex = curry(<span class="keyword">function</span>(a) {
        <span class="keyword">var</span> accum = [],
            total = a.length,
            i;
    
        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; total; i++) {
            accum[i] = Tuple2(a[i], i);
        }
    
        <span class="keyword">return</span> accum;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .method(<span class="string">'ap'</span>, isArray, ap)
        .method(<span class="string">'chain'</span>, isArray, chain)
        .method(<span class="string">'concat'</span>, isArray, concat)
        .method(<span class="string">'count'</span>, isArray, count)
        .method(<span class="string">'drop'</span>, isArray, drop)
        .method(<span class="string">'dropRight'</span>, isArray, dropRight)
        .method(<span class="string">'dropWhile'</span>, isArray, dropWhile)
        .method(<span class="string">'exists'</span>, isArray, exists)
        .method(<span class="string">'filter'</span>, isArray, filter)
        .method(<span class="string">'fold'</span>, isArray, fold)
        .method(<span class="string">'foldRight'</span>, isArray, foldRight)
        .method(<span class="string">'map'</span>, isArray, map)
        .method(<span class="string">'partition'</span>, isArray, partition)
        .method(<span class="string">'reduce'</span>, isArray, reduce)
        .method(<span class="string">'reduceRight'</span>, isArray, reduceRight)
        .method(<span class="string">'take'</span>, isArray, take)
        .method(<span class="string">'takeRight'</span>, isArray, takeRight)
        .method(<span class="string">'takeWhile'</span>, isArray, takeWhile)
        .method(<span class="string">'zip'</span>, isArray, zip)
        .method(<span class="string">'zipWithIndex'</span>, isArray, zipWithIndex);</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <h1>Fo (Fantasy Overloading)</h1>
<p>   Overloaded operators for compatible JavaScript:</p>
<pre><code> * `&gt;=` Monad chain:

       fo()(
           Option.Some(1) &gt;= function(x) {
               return x &lt; 0 ? Option.None : Option.Some(x + 2);
           }
       ).getOrElse(0) == 3;

 * `&lt;` Monad sequence:

       fo()(
           Option.Some(1) &lt; Option.Some(2)
       ).getOrElse(0) == 2;

 * `%` Functor map:

       fo()(
           Option.Some(1) % add(2)
       ).getOrElse(0) == 3;

 * `*` Applicative ap(ply):

       fo()(
           Option.Some(add) * Option.Some(1) * Option.Some(2)
       ).getOrElse(0) == 3;

 * `&lt;&lt;` Compose:

       fo()(
           add(1) &lt;&lt; times(2)
       )(3) == 7;

 * `&gt;&gt;` Compose reverse:

       fo()(
           add(1) &gt;&gt; times(2)
       )(3) == 8;

 * `+` Semigroup concat:

       fo()(
           Option.Some([1, 2]) + Option.Some([3, 4])
       ).getOrElse([]) == [1, 2, 3, 4];

 * `-` Group minus:

       fo()(
           Option.Some(1) - Option.Some(2)
       ).getOrElse(0) == -1;</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    
    <span class="comment">/* Gross mutable global */</span>
    <span class="keyword">var</span> foQueue;</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <h2>fo()(a)</h2>
<p>   Creates a new syntax scope. The <code>a</code> expression is allowed multiple
   usages of a single operator per <code>fo</code> call.</p>
<p>   For most operations, the associated name will be called on the
   operands. for example:</p>
<pre><code>   fo()(Option.Some([1, 2]) + Option.Some([3, 4]))</code></pre>
<p>   De-sugars into:</p>
<pre><code>   Option.Some([1, 2]).concat(Option.Some([3, 4]))</code></pre>
<p>   The exceptions are <code>andThen</code>, <code>sequence</code> and <code>minus</code>. They are
   derived from Compose, Monad and Group, respectively.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">fo</span><span class="params">()</span> {</span>
        <span class="keyword">var</span> env = squishy,
            prevFoQueue = foQueue;
    
        <span class="keyword">if</span>(arguments.length) {
            env.error(<span class="string">'Expecting no arguments given to fo. Use fo()(arguments)'</span>)();
        }
    
        foQueue = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <h2>proxy(prop)(a)(b)</h2>
<p> Lazy dynamic composing of structures / containers together via a property.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">var</span> proxy = curry(<span class="keyword">function</span>(prop, a, b) {
            <span class="keyword">return</span> env[prop](a, b);
        });
    
        <span class="keyword">return</span> <span class="keyword">function</span>(n) {
            <span class="keyword">var</span> op,
                x;
    
            <span class="keyword">if</span>(!foQueue.length) {
                foQueue = prevFoQueue;
                <span class="keyword">return</span> n;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <blockquote>
<p>= &gt; === ==</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">if</span>(n === <span class="literal">false</span>) {
                op = proxy(<span class="string">'chain'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>&amp;</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>            } <span class="keyword">else</span> <span class="keyword">if</span>(n === <span class="number">0</span>) {
                op = andThen;</pre></div></div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              <p>&lt;&lt;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            } <span class="keyword">else</span> <span class="keyword">if</span>(n === Math.pow(<span class="number">2</span>, (<span class="number">2</span> &lt;<span class="xml"><span class="tag">&lt; <span class="attribute">foQueue.length</span>) <span class="attribute">-</span> <span class="attribute">3</span>)) {
                <span class="attribute">op</span> = <span class="attribute">proxy</span>('<span class="attribute">compose</span>');
    
</span></pre></div></div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              <p>*</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            } <span class="keyword">else</span> <span class="keyword">if</span>(n === Math.pow(<span class="number">2</span>, foQueue.length * (foQueue.length + <span class="number">1</span>) / <span class="number">2</span>)) {
                op = proxy(<span class="string">'ap'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <ul>
<li>| ^</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>            } <span class="keyword">else</span> <span class="keyword">if</span>(n === (<span class="number">2</span> &lt;<span class="xml"><span class="tag">&lt; <span class="attribute">foQueue.length</span>) <span class="attribute">-</span> <span class="attribute">2</span>) {
                <span class="attribute">op</span> = <span class="attribute">proxy</span>('<span class="attribute">concat</span>');
    
</span></pre></div></div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              <p>%</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            } <span class="keyword">else</span> <span class="keyword">if</span>(n === <span class="number">2</span>) {
                op = proxy(<span class="string">'map'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <p>-</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            } <span class="keyword">else</span> <span class="keyword">if</span>(n &lt; <span class="number">0</span>) {
                op = minus;</pre></div></div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              <p>&lt; &lt;= !== !=</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            } <span class="keyword">else</span> <span class="keyword">if</span>(n === <span class="literal">true</span>) {
                op = sequence;
    
            } <span class="keyword">else</span> {
                foQueue = prevFoQueue;
                env.error(<span class="string">"Couldn't determine operation. Has fo.unsafeSetValueOf been called for all operands?"</span>)();
            }
    
            x = env.reduce(foQueue, <span class="keyword">function</span>(a, b) {
                <span class="comment">/* Unwrap a overload if it is wrapped in */</span>
                <span class="keyword">var</span> left = isWrap(a) ? a.value : a,
                    right = isWrap(b) ? b.value : b;
    
                <span class="keyword">return</span> op(left).call(left, right);
            });
    
            foQueue = prevFoQueue;
    
            <span class="keyword">return</span> x;
        };
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              <h2>fo.unsafeSetValueOf(proto)</h2>
<p>  Used to mutate the <code>valueOf</code> property on <code>proto</code>. Necessary to fo
  the <code>fo</code> block&#39;s operator overloading. Uses the object&#39;s existing
  <code>valueOf</code> if not in a <code>fo</code> block.</p>
<p>  <em>Warning:</em> this mutates <code>proto</code>. May not be safe, even though it
  tries to default back to the normal behaviour when not in a <code>fo</code>
  block.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fo.unsafeSetValueOf = <span class="keyword">function</span>(proto) {
        <span class="keyword">var</span> prev = proto.valueOf;
        proto.valueOf = <span class="keyword">function</span>() {
    
            <span class="keyword">if</span>(foQueue === <span class="keyword">void</span>(<span class="number">0</span>)) {
                <span class="keyword">return</span> prev.call(<span class="keyword">this</span>);
            }
    
            foQueue.push(<span class="keyword">this</span>);
    
            <span class="keyword">return</span> <span class="number">1</span> &lt;<span class="xml"><span class="tag">&lt; <span class="attribute">foQueue.length</span>;
        };
    };
    
</span></pre></div></div>
            
        </li>
        
        
        <li id="section-120">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-120">&#182;</a>
              </div>
              <h2>Function wrapper</h2>
<p> This wraps a function so we can extract it later, ideal for for
 chaining functions (see fo.chain).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="comment">/*
        This is an alternative for overriding `fo.unsafeSetValueOf(Function.prototype)`,
        which obviously is not what we want to do if the library is interfacing with
        other external sources. So we wrap the function so we can later test against it.
    */</span>
    <span class="keyword">var</span> wrap = tagged(<span class="string">'wrap'</span>, [<span class="string">'value'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-121">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-121">&#182;</a>
              </div>
              <h2>isWrap(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>wrap</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isWrap = isInstanceOf(wrap);</pre></div></div>
            
        </li>
        
        
        <li id="section-122">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-122">&#182;</a>
              </div>
              <h3>Fantasy Overload</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fo.unsafeSetValueOf(wrap.prototype);</pre></div></div>
            
        </li>
        
        
        <li id="section-123">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-123">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'fo'</span>, fo)
        .property(<span class="string">'wrap'</span>, wrap);</pre></div></div>
            
        </li>
        
        
        <li id="section-124">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-124">&#182;</a>
              </div>
              <h1>Attempt</h1>
<pre><code>   Attempt e v = Failure e + Success v</code></pre>
<p>  The Attempt data type represents a &quot;Success&quot; value or a
  semigroup of &quot;Failure&quot; values. Attempt has an applicative
  functor which collects Failures&#39; errors or creates a new Success
  value.</p>
<p>  Here&#39;s an example function which validates a String:</p>
<pre><code>   function nonEmpty(field, string) {
       return string
           ? squishy.Success(string)
           : squishy.Failure([field + &quot; must be non-empty&quot;]);
   }</code></pre>
<h2>Success(value)</h2>
<p>  Represents a Successful <code>value</code>.</p>
<h2>Failure(errors)</h2>
<p>  Represents a Failure.</p>
<ul>
<li><code>ap(b, concat)</code> - Applicative ap(ply)</li>
<li><code>chain(f)</code> - Monadic flatMap/bind</li>
<li><code>equal(a)</code> - <code>true</code> if <code>a</code> is equal to <code>this</code></li>
<li><code>extract()</code> - extract the value from attempt</li>
<li><code>fold(a, b)</code> - <code>a</code> applied to value if <code>Left(x)</code>, <code>b</code> if <code>Right(x)</code></li>
<li><code>map(f)</code> - Functor map</li>
<li><code>swap()</code> - Swap values</li>
<li><code>isSuccess</code> - <code>true</code> if <code>this</code> is <code>Success(x)</code></li>
<li><code>isFailure</code> - <code>true</code> if <code>this</code> is <code>Failure(x)</code></li>
<li><code>toArray()</code> - <code>[x]</code> if <code>Success(x)</code>, <code>[]</code> if <code>Failure(x)</code></li>
<li><code>toOption()</code> - <code>Some(x)</code> if <code>Success(x)</code>, <code>None</code> if <code>Failure(x)</code></li>
<li><code>toStream()</code> - <code>Stream.of(x)</code> if <code>Success(x)</code>, <code>Stream.empty()</code> if <code>Failure(x)</code></li>
<li><code>toLeft(r)</code> - <code>Left(x)</code> if <code>Success(x)</code>, <code>Right(r)</code> if <code>Failure(x)</code></li>
<li><code>toRight(l)</code> - <code>Right(x)</code> if <code>Success(x)</code>, <code>Left(l)</code> if <code>Failure(x)</code></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> Attempt = taggedSum(<span class="string">'Attempt'</span>, {
        Success: [<span class="string">'value'</span>],
        Failure: [<span class="string">'errors'</span>]
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-125">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-125">&#182;</a>
              </div>
              <h3>ap(b, concat)</h3>
<p> Apply a function in the environment of the success of this attempt,
 accumulating errors
 Applicative ap(ply)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.prototype.ap = <span class="keyword">function</span>(b, concat) {
        <span class="keyword">var</span> a = <span class="keyword">this</span>;
        <span class="keyword">return</span> a.match({
            Success: <span class="keyword">function</span>(value) {
                <span class="keyword">return</span> squishy.map(b, value);
            },
            Failure: <span class="keyword">function</span>(e) {
                <span class="keyword">return</span> b.match({
                    Success: <span class="keyword">function</span>(value) {
                        <span class="keyword">return</span> a;
                    },
                    Failure: <span class="keyword">function</span>(errors) {
                        <span class="keyword">return</span> Attempt.Failure(concat(e, errors));
                    }
                });
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-126">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-126">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Bind through the success of the attempt
 Monadic flatMap/bind</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Success: <span class="keyword">function</span>(a) {
                <span class="keyword">return</span> f(a);
            },
            Failure: identity
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-127">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-127">&#182;</a>
              </div>
              <h3>equal(a)</h3>
<p> Compare two attempt values for equality</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.prototype.equal = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Success: <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> a.match({
                    Success: <span class="keyword">function</span>(y) {
                        <span class="keyword">return</span> squishy.equal(x, y);
                    },
                    Failure: constant(<span class="literal">false</span>)
                });
            },
            Failure: <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> a.match({
                    Success: constant(<span class="literal">false</span>),
                    Failure: <span class="keyword">function</span>(y) {
                        <span class="keyword">return</span> squishy.equal(x, y);
                    }
                });
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-128">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-128">&#182;</a>
              </div>
              <h3>extract()</h3>
<p> Extract the value from the attempt.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.prototype.extract = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Success: identity,
            Failure: identity
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-129">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-129">&#182;</a>
              </div>
              <h3>fold(a, b)</h3>
<p> Catamorphism. Run the first given function if failure, otherwise,
 the second given function.
  <code>a</code> applied to value if <code>Success</code>, <code>b</code> if <code>Failure</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.prototype.fold = <span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Success: a,
            Failure: b
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-130">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-130">&#182;</a>
              </div>
              <h3>map(f)</h3>
<p> Map on the success of this attempt.
 Functor map</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.prototype.map = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Success: <span class="keyword">function</span>(a) {
                <span class="keyword">return</span> Attempt.Success(f(a));
            },
            Failure: <span class="keyword">function</span>(e) {
                <span class="keyword">return</span> Attempt.Failure(e);
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-131">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-131">&#182;</a>
              </div>
              <h3>swap()</h3>
<p> Flip the failure/success values in this attempt.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.prototype.swap = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Success: Attempt.Failure,
            Failure: Attempt.Success
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-132">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-132">&#182;</a>
              </div>
              <h3>toOption()</h3>
<p> Return an empty option or option with one element on the success
 of this attempt.
 <code>Some(x)</code> if <code>Success(x)</code>, <code>None</code> if <code>Failure()</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.prototype.toOption = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Success: Option.Some,
            Failure: <span class="keyword">function</span>() {
                <span class="keyword">return</span> Option.None;
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-133">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-133">&#182;</a>
              </div>
              <h3>toLeft()</h3>
<p> Return an left either bias if attempt is a success.
 <code>Left(x)</code> if <code>Success(x)</code>, <code>Right(x)</code> if <code>Failure(x)</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.prototype.toLeft = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Success: Either.Left,
            Failure: Either.Right
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-134">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-134">&#182;</a>
              </div>
              <h3>toRight()</h3>
<p> Return an right either bias if attempt is a success.
 <code>Right(x)</code> if <code>Success(x)</code>, <code>Left(x)</code> if <code>Failure(x)</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.prototype.toRight = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Success: Either.Left,
            Failure: Either.Right
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-135">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-135">&#182;</a>
              </div>
              <h3>toArray()</h3>
<p> Return an empty array or array with one element on the success
 of this attempt.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.prototype.toArray = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Success: <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> [x];
            },
            Failure: <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> [];
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-136">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-136">&#182;</a>
              </div>
              <h3>toStream()</h3>
<p> Return an empty stream or stream with one element on the success
 of this attempt.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.prototype.toStream = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Success: Stream.of,
            Failure: Stream.empty
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-137">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-137">&#182;</a>
              </div>
              <h2>Success(x)</h2>
<p> Constructor to represent the existance of a value, <code>x</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.Success.prototype.isSuccess = <span class="literal">true</span>;
    Attempt.Success.prototype.isFailure = <span class="literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-138">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-138">&#182;</a>
              </div>
              <h2>Failure(x)</h2>
<p> Constructor to represent the existance of a value, <code>x</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.Failure.prototype.isSuccess = <span class="literal">false</span>;
    Attempt.Failure.prototype.isFailure = <span class="literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-139">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-139">&#182;</a>
              </div>
              <h2>of(x)</h2>
<p> Constructor <code>of</code> Monad creating <code>Attempt.Success</code> with value of <code>x</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.of = <span class="keyword">function</span>(x) {
        <span class="keyword">return</span> Attempt.Success(x);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-140">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-140">&#182;</a>
              </div>
              <h2>empty()</h2>
<p> Constructor <code>empty</code> Monad creating <code>Attempt.Failure</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.empty = <span class="keyword">function</span>() {
        <span class="keyword">return</span> Attempt.Failure();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-141">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-141">&#182;</a>
              </div>
              <h2>isAttempt(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is a <code>Success</code> or a <code>Failure</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isAttempt = isInstanceOf(Attempt);</pre></div></div>
            
        </li>
        
        
        <li id="section-142">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-142">&#182;</a>
              </div>
              <h2>successOf(type)</h2>
<p> Sentinel value for when an success of a particular type is needed:</p>
<pre><code>  successOf(Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">successOf</span><span class="params">(type)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, successOf);
        self.type = type;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-143">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-143">&#182;</a>
              </div>
              <h2>isSuccessOf(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>successOf</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isSuccessOf = isInstanceOf(successOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-144">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-144">&#182;</a>
              </div>
              <h2>failureOf(type)</h2>
<p> Sentinel value for when an failure of a particular type is needed:</p>
<pre><code>  failureOf(Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">failureOf</span><span class="params">(type)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, failureOf);
        self.type = type;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-145">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-145">&#182;</a>
              </div>
              <h2>isFailureOf(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>failureOf</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isFailureOf = isInstanceOf(failureOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-146">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-146">&#182;</a>
              </div>
              <h3>Fantasy Overload</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fo.unsafeSetValueOf(Attempt.prototype);</pre></div></div>
            
        </li>
        
        
        <li id="section-147">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-147">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'Attempt'</span>, Attempt)
        .property(<span class="string">'Success'</span>, Attempt.Success)
        .property(<span class="string">'Failure'</span>, Attempt.Failure)
        .property(<span class="string">'successOf'</span>, successOf)
        .property(<span class="string">'failureOf'</span>, failureOf)
        .property(<span class="string">'isAttempt'</span>, isAttempt)
        .property(<span class="string">'isSuccessOf'</span>, isSuccessOf)
        .property(<span class="string">'isFailureOf'</span>, isFailureOf)
        .method(<span class="string">'of'</span>, strictEquals(Attempt), <span class="keyword">function</span>(x) {
            <span class="keyword">return</span> Attempt.of(x);
        })
        .method(<span class="string">'empty'</span>, strictEquals(Attempt), <span class="keyword">function</span>() {
            <span class="keyword">return</span> Attempt.empty();
        })
        .method(<span class="string">'ap'</span>, isAttempt, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.ap(b, <span class="keyword">this</span>.concat);
        })
        .method(<span class="string">'arb'</span>, isSuccessOf, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> Attempt.Success(<span class="keyword">this</span>.arb(a.type, b - <span class="number">1</span>));
        })
        .method(<span class="string">'arb'</span>, isFailureOf, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> Attempt.Failure(<span class="keyword">this</span>.arb(a.type, b - <span class="number">1</span>));
        })
        .method(<span class="string">'chain'</span>, isAttempt, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.chain(b);
        })
        .method(<span class="string">'shrink'</span>, isAttempt, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> [];
        })
        .method(<span class="string">'equal'</span>, isAttempt, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.equal(b);
        })
        .method(<span class="string">'extract'</span>, isAttempt, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a.extract();
        })
        .method(<span class="string">'fold'</span>, isAttempt, <span class="keyword">function</span>(a, b, c) {
            <span class="keyword">return</span> a.fold(b, c);
        })
        .method(<span class="string">'map'</span>, isAttempt, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.map(b);
        })
        .method(<span class="string">'toArray'</span>, isAttempt, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a.toArray();
        })
        .method(<span class="string">'toStream'</span>, isAttempt, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a.toStream();
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-148">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-148">&#182;</a>
              </div>
              <h1>Either</h1>
<pre><code>   Either a b = Left a + Right b</code></pre>
<p>  Represents a tagged disjunction between two sets of values; <code>a</code> or
  <code>b</code>. Methods are Right-biased.</p>
<ul>
<li><code>ap(e)</code> - Applicative ap(ply)</li>
<li><code>chain(f)</code> - Monadic flatMap/bind</li>
<li><code>concat(s, f)</code> - Semigroup concat</li>
<li><code>fold(a, b)</code> - <code>a</code> applied to value if <code>Left(x)</code>, <code>b</code> if <code>Right(x)</code></li>
<li><code>map(f)</code> - Functor map</li>
<li><code>swap()</code> - If this is a Left, then return the Left value in Right or vice versa.</li>
<li><code>isLeft</code> - <code>true</code> iff <code>this</code> is <code>Left(x)</code></li>
<li><code>isRight</code> - <code>true</code> iff <code>this</code> is <code>Right(x)</code></li>
<li><code>toOption()</code> - <code>None</code> if <code>Left(x)</code>, <code>Some(x)</code> value of <code>Right(x)</code></li>
<li><code>toArray()</code> - <code>[]</code> if <code>Left(x)</code>, <code>[x]</code> value if <code>Right(x)</code></li>
<li><code>toAttempt()</code> - <code>Failure(x)</code> if <code>Left(x)</code>, <code>Success(x)</code> value if <code>Right(x)</code></li>
<li><code>toStream()</code> - <code>Stream.empty()</code> if <code>Left(x)</code>, <code>Stream.of(x)</code> value if <code>Right(x)</code></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> Either = taggedSum(<span class="string">'Either'</span>, {
        Left: [<span class="string">'value'</span>],
        Right: [<span class="string">'value'</span>]
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-149">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-149">&#182;</a>
              </div>
              <h3>ap(b, concat)</h3>
<p> Apply a function in the environment of the right of this either,
 accumulating errors
 Applicative ap(ply)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.prototype.ap = <span class="keyword">function</span>(e) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Left: <span class="keyword">function</span>() {
                <span class="keyword">return</span> <span class="keyword">this</span>;
            },
            Right: <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> squishy.map(e, x);
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-150">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-150">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Bind through the success of the either
 Monadic flatMap/bind</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Left: constant(<span class="keyword">this</span>),
            Right: f
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-151">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-151">&#182;</a>
              </div>
              <h3>concat(s, f)</h3>
<p> Concatenate two eithers associatively together.
 Semigroup concat</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.prototype.concat = <span class="keyword">function</span>(s, f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Left: <span class="keyword">function</span>() {
                <span class="keyword">return</span> squishy.fold(
                    s,
                    constant(env),
                    constant(s)
                );
            },
            Right: <span class="keyword">function</span>(y) {
                <span class="keyword">return</span> squishy.map(s, <span class="keyword">function</span>(x) {
                    <span class="keyword">return</span> f(x, y);
                });
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-152">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-152">&#182;</a>
              </div>
              <h3>equal(a)</h3>
<p> Compare two attempt values for equality</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.prototype.equal = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Left: <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> a.match({
                    Left: <span class="keyword">function</span>(y) {
                        <span class="keyword">return</span> squishy.equal(x, y);
                    },
                    Right: constant(<span class="literal">false</span>)
                });
            },
            Right: <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> a.match({
                    Left: constant(<span class="literal">false</span>),
                    Right: <span class="keyword">function</span>(y) {
                        <span class="keyword">return</span> squishy.equal(x, y);
                    }
                });
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-153">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-153">&#182;</a>
              </div>
              <h3>extract(a)</h3>
<p> Extract the value from the either.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.prototype.extract = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Left: identity,
            Right: identity
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-154">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-154">&#182;</a>
              </div>
              <h3>fold(a, b)</h3>
<p> Catamorphism. Run the first given function if failure, otherwise,
 the second given function.
  <code>a</code> applied to value if <code>Left</code>, <code>b</code> if <code>Right</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.prototype.fold = <span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Left: a,
            Right: b
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-155">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-155">&#182;</a>
              </div>
              <h3>map(f)</h3>
<p> Map on the right of this either.
 Functor map</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.prototype.map = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Left: constant(<span class="keyword">this</span>),
            Right: <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> Either.Right(f(x));
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-156">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-156">&#182;</a>
              </div>
              <h3>swap()</h3>
<p> Flip the left/right values in this either.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.prototype.swap = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Left: <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> Either.Right(x);
            },
            Right: <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> Either.Left(x);
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-157">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-157">&#182;</a>
              </div>
              <h3>toOption()</h3>
<p> Return an empty option or option with one element on the right
 of this either.
 <code>Some(x)</code> if <code>Success(x)</code>, <code>None</code> if <code>Failure()</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.prototype.toOption = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Left: <span class="keyword">function</span>() {
                <span class="keyword">return</span> Option.None;
            },
            Right: Option.Some
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-158">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-158">&#182;</a>
              </div>
              <h3>toAttempt()</h3>
<p> Return failure if either is a left and success if either is right.
 <code>Left(x)</code> if <code>Failure(x)</code>, <code>Right(x)</code> if <code>Success(x)</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.prototype.toAttempt = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Left: Attempt.Failure,
            Right: Attempt.Success
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-159">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-159">&#182;</a>
              </div>
              <h3>toArray()</h3>
<p> Return an empty array or array with one element on the right
 of this either.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.prototype.toArray = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Left: constant([]),
            Right: <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> [x];
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-160">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-160">&#182;</a>
              </div>
              <h3>toStream()</h3>
<p> Return an empty stream or stream with one element on the right
 of this either.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Attempt.prototype.toStream = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Left: Stream.empty,
            Right: Stream.of
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-161">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-161">&#182;</a>
              </div>
              <h2>Left(x)</h2>
<p> Constructor to represent the Left case.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.Left.prototype.isLeft = <span class="literal">true</span>;
    Either.Left.prototype.isRight = <span class="literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-162">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-162">&#182;</a>
              </div>
              <h2>Right(x)</h2>
<p> Constructor to represent the (biased) Right case.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.Right.prototype.isLeft = <span class="literal">false</span>;
    Either.Right.prototype.isRight = <span class="literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-163">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-163">&#182;</a>
              </div>
              <h2>of(x)</h2>
<p> Constructor <code>of</code> Monad creating <code>Either.Right</code> with value of <code>x</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.of = <span class="keyword">function</span>(x) {
        <span class="keyword">return</span> Either.Right(x);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-164">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-164">&#182;</a>
              </div>
              <h2>empty()</h2>
<p> Constructor <code>empty</code> Monad creating <code>Either.Left</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Either.Right.empty = <span class="keyword">function</span>() {
        <span class="keyword">return</span> Either.Left();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-165">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-165">&#182;</a>
              </div>
              <h2>isEither(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is a <code>Left</code> or a <code>Right</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isEither = isInstanceOf(Either);</pre></div></div>
            
        </li>
        
        
        <li id="section-166">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-166">&#182;</a>
              </div>
              <h2>leftOf(type)</h2>
<p> Sentinel value for when an left of a particular type is needed:</p>
<pre><code>  leftOf(Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">leftOf</span><span class="params">(type)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, leftOf);
        self.type = type;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-167">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-167">&#182;</a>
              </div>
              <h2>isLeftOf(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>leftOf</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isLeftOf = isInstanceOf(leftOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-168">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-168">&#182;</a>
              </div>
              <h2>rightOf(type)</h2>
<p> Sentinel value for when an right of a particular type is needed:</p>
<pre><code>  rightOf(Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">rightOf</span><span class="params">(type)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, rightOf);
        self.type = type;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-169">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-169">&#182;</a>
              </div>
              <h2>isRightOf(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>rightOf</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isRightOf = isInstanceOf(rightOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-170">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-170">&#182;</a>
              </div>
              <h3>Fantasy Overload</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fo.unsafeSetValueOf(Either.prototype);</pre></div></div>
            
        </li>
        
        
        <li id="section-171">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-171">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'Either'</span>, Either)
        .property(<span class="string">'Left'</span>, Either.Left)
        .property(<span class="string">'Right'</span>, Either.Right)
        .property(<span class="string">'leftOf'</span>, leftOf)
        .property(<span class="string">'rightOf'</span>, rightOf)
        .property(<span class="string">'isEither'</span>, isEither)
        .property(<span class="string">'isLeftOf'</span>, isLeftOf)
        .property(<span class="string">'isRightOf'</span>, isRightOf)
        .method(<span class="string">'of'</span>, strictEquals(Either), <span class="keyword">function</span>(x) {
            <span class="keyword">return</span> Either.of(x);
        })
        .method(<span class="string">'empty'</span>, strictEquals(Either), <span class="keyword">function</span>(x) {
            <span class="keyword">return</span> Either.Left.empty();
        })
        .method(<span class="string">'ap'</span>, isEither, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.ap(b);
        })
        .method(<span class="string">'arb'</span>, isLeftOf, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> Either.Left(<span class="keyword">this</span>.arb(a.type, b - <span class="number">1</span>));
        })
        .method(<span class="string">'arb'</span>, isRightOf, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> Either.Right(<span class="keyword">this</span>.arb(a.type, b - <span class="number">1</span>));
        })
        .method(<span class="string">'shrink'</span>, isEither, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> [];
        })
        .method(<span class="string">'chain'</span>, isEither, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.chain(b);
        })
        .method(<span class="string">'concat'</span>, isEither, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.concat(b, <span class="keyword">this</span>.concat);
        })
        .method(<span class="string">'equal'</span>, isEither, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.equal(b);
        })
        .method(<span class="string">'extract'</span>, isEither, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a.extract();
        })
        .method(<span class="string">'fold'</span>, isEither, <span class="keyword">function</span>(a, b, c) {
            <span class="keyword">return</span> a.fold(b, c);
        })
        .method(<span class="string">'map'</span>, isEither, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.map(b);
        })
        .method(<span class="string">'toArray'</span>, isEither, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a.toArray();
        })
        .method(<span class="string">'toStream'</span>, isAttempt, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a.toStream();
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-172">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-172">&#182;</a>
              </div>
              <h1>Option</h1>
<pre><code>  Option a = Some a + None</code></pre>
<p>  The option type encodes the presence and absence of a value. The
  <code>Some</code> constructor represents a value and <code>None</code> represents the
  absence.</p>
<ul>
<li><code>ap(s)</code> - Applicative ap(ply)</li>
<li><code>chain(f)</code> - Monadic flatMap/bind</li>
<li><code>concat(s, plus)</code> - Semigroup concat</li>
<li><code>equal(a)</code> -  <code>true</code> if <code>a</code> is equal to <code>this</code></li>
<li><code>extract()</code> -  extract the value from option</li>
<li><code>fold(a, b)</code> - Applies <code>a</code> to value if <code>Some</code> or defaults to <code>b</code></li>
<li><code>get()</code> - get the value from option</li>
<li><code>getOrElse(a)</code> - Default value for <code>None</code></li>
<li><code>map(f)</code> - Functor map</li>
<li><code>isSome</code> - <code>true</code> if <code>this</code> is <code>Some</code></li>
<li><code>isNone</code> - <code>true</code> if <code>this</code> is <code>None</code></li>
<li><code>toAttempt(r)</code> - <code>Success(x)</code> if <code>Some(x)</code>, <code>Failure(r)</code> if <code>None</code></li>
<li><code>toArray()</code> - <code>[x]</code> if <code>Some(x)</code>, <code>[]</code> if <code>None</code></li>
<li><code>toStream()</code> - <code>Stream.of(x)</code> if <code>Some(x)</code>, <code>Stream.empty()</code> if <code>None</code></li>
<li><code>toLeft(r)</code> - <code>Left(x)</code> if <code>Some(x)</code>, <code>Right(r)</code> if None</li>
<li><code>toRight(l)</code> - <code>Right(x)</code> if <code>Some(x)</code>, <code>Left(l)</code> if None</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> Option = taggedSum(<span class="string">'Option'</span>, {
        Some: [<span class="string">'value'</span>],
        None: []
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-173">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-173">&#182;</a>
              </div>
              <h3>ap(b)</h3>
<p> Apply a function in the environment of the some of this option,
 accumulating errors
 Applicative ap(ply)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.prototype.ap = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(
            <span class="keyword">function</span>(f) {
                <span class="keyword">return</span> squishy.map(a, f);
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-174">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-174">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Bind through the success of the option
 Monadic flatMap/bind</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Some: f,
            None: constant(<span class="keyword">this</span>)
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-175">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-175">&#182;</a>
              </div>
              <h3>concat(s, f)</h3>
<p> Concatenate two options associatively together.
 Semigroup concat</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.prototype.concat = <span class="keyword">function</span>(s) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Some: <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> squishy.map(
                    s,
                    <span class="keyword">function</span>(y) {
                        <span class="keyword">return</span> squishy.concat(x, y);
                    }
                );
            },
            None: constant(<span class="keyword">this</span>)
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-176">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-176">&#182;</a>
              </div>
              <h3>equal(a)</h3>
<p> Compare two option values for equality</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.prototype.equal = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Some: <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> a.match({
                    Some: <span class="keyword">function</span>(y) {
                        <span class="keyword">return</span> squishy.equal(x, y);
                    },
                    None: constant(<span class="literal">false</span>)
                });
            },
            None: <span class="keyword">function</span>() {
                <span class="keyword">return</span> a.match({
                    Some: constant(<span class="literal">false</span>),
                    None: constant(<span class="literal">true</span>)
                });
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-177">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-177">&#182;</a>
              </div>
              <h3>extract()</h3>
<p> Extract the value from the option.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.prototype.extract = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Some: identity,
            None: constant(<span class="literal">null</span>)
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-178">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-178">&#182;</a>
              </div>
              <h3>fold(a, b)</h3>
<p> Catamorphism. Run the first given function if failure, otherwise,
 the second given function.
  <code>a</code> applied to value if <code>Some</code>, <code>b</code> if <code>None</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.prototype.fold = <span class="keyword">function</span>(f, g) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Some: f,
            None: g
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-179">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-179">&#182;</a>
              </div>
              <h3>get()</h3>
<p> Get the value from the option.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.prototype.get = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Some: identity,
            None: error(<span class="string">'Unexpected value'</span>)
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-180">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-180">&#182;</a>
              </div>
              <h3>get()</h3>
<p> Get the value from the option or else</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.prototype.getOrElse = <span class="keyword">function</span>(x) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Some: identity,
            None: constant(x)
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-181">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-181">&#182;</a>
              </div>
              <h3>map(f)</h3>
<p> Map on the some of this option.
 Functor map</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.prototype.map = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(
            <span class="keyword">function</span>(a) {
                <span class="keyword">return</span> Option.of(f(a));
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-182">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-182">&#182;</a>
              </div>
              <h3>toAttempt()</h3>
<p> Return failure if option is a some and success if option is none.
 <code>None</code> if <code>Failure(x)</code>, <code>Some(x)</code> if <code>Success(e)</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.prototype.toAttempt = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Some: Attempt.Success,
            None: <span class="keyword">function</span>() {
                <span class="keyword">return</span> Attempt.Failure(squishy.empty(Array));
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-183">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-183">&#182;</a>
              </div>
              <h3>toLeft()</h3>
<p> Return an left either bias if option is a some.
 <code>Left(x)</code> if <code>Some(x)</code>, <code>Right(x)</code> if <code>None</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.prototype.toLeft = <span class="keyword">function</span>(o) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Some: Either.Left,
            None: <span class="keyword">function</span>() {
                <span class="keyword">return</span> Either.Right(o);
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-184">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-184">&#182;</a>
              </div>
              <h3>toRight()</h3>
<p> Return an right either bias if option is a some.
 <code>Right(x)</code> if <code>Some(x)</code>, <code>Left(x)</code> if <code>None</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.prototype.toRight = <span class="keyword">function</span>(o) {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Some: Either.Right,
            None: <span class="keyword">function</span>() {
                <span class="keyword">return</span> Either.Left(o);
            }
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-185">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-185">&#182;</a>
              </div>
              <h3>toArray()</h3>
<p> Return an empty array or array with one element on the some
 of this option.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.prototype.toArray = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Some: <span class="keyword">function</span>(x) {
                <span class="keyword">return</span> [x];
            },
            None: constant([])
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-186">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-186">&#182;</a>
              </div>
              <h2>of(x)</h2>
<p> Constructor <code>of</code> Monad creating <code>Option</code> with value of <code>x</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.of = <span class="keyword">function</span>(x) {
        <span class="keyword">return</span> Option.Some(x);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-187">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-187">&#182;</a>
              </div>
              <h2>Some(x)</h2>
<p> Constructor to represent the existence of a value, <code>x</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.Some.prototype.isSome = <span class="literal">true</span>;
    Option.Some.prototype.isNone = <span class="literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-188">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-188">&#182;</a>
              </div>
              <h2>None</h2>
<p> Represents the absence of a value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Option.None.isSome = <span class="literal">false</span>;
    Option.None.isNone = <span class="literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-189">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-189">&#182;</a>
              </div>
              <h2>isOption(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is a <code>Some</code> or <code>None</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isOption = isInstanceOf(Option);</pre></div></div>
            
        </li>
        
        
        <li id="section-190">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-190">&#182;</a>
              </div>
              <h2>someOf(type)</h2>
<p> Sentinel value for when an some of a particular type is needed:</p>
<pre><code>  someOf(Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">someOf</span><span class="params">(type)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, someOf);
        self.type = type;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-191">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-191">&#182;</a>
              </div>
              <h2>isSomeOf(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>someOf</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isSomeOf = isInstanceOf(someOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-192">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-192">&#182;</a>
              </div>
              <h2>noneOf(type)</h2>
<p> Sentinel value for when an none of a particular type is needed:</p>
<pre><code>  noneOf(Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">noneOf</span><span class="params">(type)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, noneOf);
        self.type = type;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-193">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-193">&#182;</a>
              </div>
              <h2>isNoneOf(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>noneOf</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isNoneOf = isInstanceOf(noneOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-194">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-194">&#182;</a>
              </div>
              <h3>Fantasy Overload</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fo.unsafeSetValueOf(Option.prototype);</pre></div></div>
            
        </li>
        
        
        <li id="section-195">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-195">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'Option'</span>, Option)
        .property(<span class="string">'Some'</span>, Option.Some)
        .property(<span class="string">'None'</span>, Option.None)
        .property(<span class="string">'someOf'</span>, someOf)
        .property(<span class="string">'noneOf'</span>, noneOf)
        .property(<span class="string">'isOption'</span>, isOption)
        .property(<span class="string">'isSomeOf'</span>, isSomeOf)
        .property(<span class="string">'isNoneOf'</span>, isNoneOf)
        .method(<span class="string">'of'</span>, strictEquals(Option.Some), <span class="keyword">function</span>(x) {
            <span class="keyword">return</span> Option.Some.of(x);
        })
        .method(<span class="string">'empty'</span>, strictEquals(Option.Some), <span class="keyword">function</span>(x) {
            <span class="keyword">return</span> Option.None;
        })
        .method(<span class="string">'ap'</span>, isOption, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.ap(b);
        })
        .method(<span class="string">'concat'</span>, isOption, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.concat(b);
        })
        .method(<span class="string">'chain'</span>, isOption, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.chain(b);
        })
        .method(<span class="string">'equal'</span>, isOption, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.equal(b);
        })
        .method(<span class="string">'extract'</span>, isOption, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a.extract();
        })
        .method(<span class="string">'fold'</span>, isOption, <span class="keyword">function</span>(a, b, c) {
            <span class="keyword">return</span> a.fold(b, c);
        })
        .method(<span class="string">'map'</span>, isOption, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.map(b);
        })
        .method(<span class="string">'arb'</span>, isSomeOf, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> Option.Some(<span class="keyword">this</span>.arb(a.type, b - <span class="number">1</span>));
        })
        .method(<span class="string">'arb'</span>, isNoneOf, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> Option.None;
        })
        .method(<span class="string">'shrink'</span>, isOption, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> [];
        })
        .method(<span class="string">'toArray'</span>, isOption, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a.toArray();
        })
        .property(<span class="string">'toOption'</span>, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a !== <span class="literal">null</span> ? Option.Some(a) : Option.None;
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-196">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-196">&#182;</a>
              </div>
              <h1>Tuples</h1>
<p> Tuples are another way of storing multiple values in a single value.
 They have a fixed number of elements (immutable), and so you can&#39;t
 cons to a tuple.
 Elements of a tuple do not need to be all of the same type</p>
<p> Example usage:</p>
<pre><code>  squishy.Tuple2(1, 2);
  squishy.Tuple3(1, 2, 3);
  squishy.Tuple4(1, 2, 3, 4);
  squishy.Tuple5(1, 2, 3, 4, 5);</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> Tuple2 = tagged(<span class="string">'Tuple2'</span>, [<span class="string">'_1'</span>, <span class="string">'_2'</span>]),
        Tuple3 = tagged(<span class="string">'Tuple3'</span>, [<span class="string">'_1'</span>, <span class="string">'_2'</span>, <span class="string">'_3'</span>]),
        Tuple4 = tagged(<span class="string">'Tuple4'</span>, [<span class="string">'_1'</span>, <span class="string">'_2'</span>, <span class="string">'_3'</span>, <span class="string">'_4'</span>]),
        Tuple5 = tagged(<span class="string">'Tuple5'</span>, [<span class="string">'_1'</span>, <span class="string">'_2'</span>, <span class="string">'_3'</span>, <span class="string">'_4'</span>, <span class="string">'_5'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-197">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-197">&#182;</a>
              </div>
              <h2>Tuple2</h2>
<ul>
<li><code>flip()</code> - flip values</li>
<li><code>concat()</code> - Semigroup (value must also be a Semigroup)</li>
<li><code>equal(a)</code> -  <code>true</code> if <code>a</code> is equal to <code>this</code></li>
<li><code>chain(f)</code> - Monadic flatMap/bind</li>
<li><code>toArray()</code> - <code>[_1, _2]</code> of the tuple</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-198">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-198">&#182;</a>
              </div>
              <h2>of(x)</h2>
<p> Constructor <code>of</code> Monad creating <code>Tuple2</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple2.of = <span class="keyword">function</span>(a, b) {
        <span class="keyword">return</span> Tuple2(a, b);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-199">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-199">&#182;</a>
              </div>
              <h3>first(t)</h3>
<p> Retrieve the first argument.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple2.first = <span class="keyword">function</span>(t) {
        <span class="keyword">return</span> t._1;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-200">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-200">&#182;</a>
              </div>
              <h3>second(t)</h3>
<p> Retrieve the second argument.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple2.second = <span class="keyword">function</span>(t) {
        <span class="keyword">return</span> t._2;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-201">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-201">&#182;</a>
              </div>
              <h3>flip()</h3>
<p>  Flip the values of the first and second.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple2.prototype.flip = <span class="keyword">function</span>() {
        <span class="keyword">return</span> Tuple2.of(<span class="keyword">this</span>._2, <span class="keyword">this</span>._1);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-202">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-202">&#182;</a>
              </div>
              <h3>concat(s, f)</h3>
<p> Concatenate two tuples associatively together.
 Semigroup concat</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple2.prototype.concat = <span class="keyword">function</span>(b) {
        <span class="keyword">return</span> Tuple2.of(
            squishy.concat(<span class="keyword">this</span>._1, b._1),
            squishy.concat(<span class="keyword">this</span>._2, b._2)
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-203">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-203">&#182;</a>
              </div>
              <h3>equal(a)</h3>
<p> Compare two option values for equality</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple2.prototype.equal = <span class="keyword">function</span>(b) {
        <span class="keyword">return</span> squishy.equal(<span class="keyword">this</span>.toArray(), b.toArray());
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-204">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-204">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Bind through the tuple of the tuples
 Monadic flatMap/bind</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple2.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> f(<span class="keyword">this</span>);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-205">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-205">&#182;</a>
              </div>
              <h3>toArray()</h3>
<p> Return an array with each element of the tuple.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple2.prototype.toArray = <span class="keyword">function</span>() {
        <span class="keyword">return</span> [<span class="keyword">this</span>._1, <span class="keyword">this</span>._2];
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-206">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-206">&#182;</a>
              </div>
              <h2>Tuple3</h2>
<ul>
<li><code>concat()</code> - Semigroup (value must also be a Semigroup)</li>
<li><code>equal(a)</code> -  <code>true</code> if <code>a</code> is equal to <code>this</code></li>
<li><code>chain(f)</code> - Monadic flatMap/bind</li>
<li><code>toArray()</code> - <code>[_1, _2, _3]</code> of the tuple</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-207">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-207">&#182;</a>
              </div>
              <h2>of(x)</h2>
<p> Constructor <code>of</code> Monad creating <code>Tuple3</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple3.of = <span class="keyword">function</span>(a, b, c) {
        <span class="keyword">return</span> Tuple3(a, b, c);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-208">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-208">&#182;</a>
              </div>
              <h3>concat(s, f)</h3>
<p> Concatenate two tuples associatively together.
 Semigroup concat</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple3.prototype.concat = <span class="keyword">function</span>(b) {
        <span class="keyword">return</span> Tuple3.of(
            squishy.concat(<span class="keyword">this</span>._1, b._1),
            squishy.concat(<span class="keyword">this</span>._2, b._2),
            squishy.concat(<span class="keyword">this</span>._3, b._3)
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-209">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-209">&#182;</a>
              </div>
              <h3>equal(a)</h3>
<p> Compare two option values for equality</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple3.prototype.equal = <span class="keyword">function</span>(b) {
        <span class="keyword">return</span> squishy.equal(<span class="keyword">this</span>.toArray(), b.toArray());
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-210">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-210">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Bind through the tuple of the tuples
 Monadic flatMap/bind</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple3.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> f(<span class="keyword">this</span>);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-211">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-211">&#182;</a>
              </div>
              <h3>toArray()</h3>
<p> Return an array with each element of the tuple.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple3.prototype.toArray = <span class="keyword">function</span>() {
        <span class="keyword">return</span> [<span class="keyword">this</span>._1, <span class="keyword">this</span>._2, <span class="keyword">this</span>._3];
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-212">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-212">&#182;</a>
              </div>
              <h2>Tuple4</h2>
<ul>
<li><code>concat()</code> - Semigroup (value must also be a Semigroup)</li>
<li><code>equal(a)</code> -  <code>true</code> if <code>a</code> is equal to <code>this</code></li>
<li><code>chain(f)</code> - Monadic flatMap/bind</li>
<li><code>toArray()</code> - <code>[_1, _2, _3, _4]</code> of the tuple</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-213">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-213">&#182;</a>
              </div>
              <h2>of(x)</h2>
<p> Constructor <code>of</code> Monad creating <code>Tuple4</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple4.of = <span class="keyword">function</span>(a, b, c, d) {
        <span class="keyword">return</span> Tuple4(a, b, c, d);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-214">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-214">&#182;</a>
              </div>
              <h3>concat(s, f)</h3>
<p> Concatenate two tuples associatively together.
 Semigroup concat</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple4.prototype.concat = <span class="keyword">function</span>(b) {
        <span class="keyword">return</span> Tuple4.of(
            squishy.concat(<span class="keyword">this</span>._1, b._1),
            squishy.concat(<span class="keyword">this</span>._2, b._2),
            squishy.concat(<span class="keyword">this</span>._3, b._3),
            squishy.concat(<span class="keyword">this</span>._4, b._4)
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-215">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-215">&#182;</a>
              </div>
              <h3>equal(a)</h3>
<p> Compare two option values for equality</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple4.prototype.equal = <span class="keyword">function</span>(b) {
        <span class="keyword">return</span> squishy.equal(<span class="keyword">this</span>.toArray(), b.toArray());
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-216">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-216">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Bind through the tuple of the tuples
 Monadic flatMap/bind</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple4.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> f(<span class="keyword">this</span>);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-217">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-217">&#182;</a>
              </div>
              <h3>toArray()</h3>
<p> Return an array with each element of the tuple.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple4.prototype.toArray = <span class="keyword">function</span>() {
        <span class="keyword">return</span> [<span class="keyword">this</span>._1, <span class="keyword">this</span>._2, <span class="keyword">this</span>._3, <span class="keyword">this</span>._4];
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-218">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-218">&#182;</a>
              </div>
              <h2>Tuple5</h2>
<ul>
<li><code>concat()</code> - Semigroup (value must also be a Semigroup)</li>
<li><code>equal(a)</code> -  <code>true</code> if <code>a</code> is equal to <code>this</code></li>
<li><code>chain(f)</code> - Monadic flatMap/bind</li>
<li><code>toArray()</code> - <code>[_1, _2, _3, _4, _5]</code> of the tuple</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-219">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-219">&#182;</a>
              </div>
              <h2>of(x)</h2>
<p> Constructor <code>of</code> Monad creating <code>Tuple5</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple5.of = <span class="keyword">function</span>(a, b, c, d, e) {
        <span class="keyword">return</span> Tuple5(a, b, c, d, e);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-220">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-220">&#182;</a>
              </div>
              <h3>concat(s, f)</h3>
<p> Concatenate two tuples associatively together.
 Semigroup concat</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple5.prototype.concat = <span class="keyword">function</span>(b) {
        <span class="keyword">return</span> Tuple5.of(
            squishy.concat(<span class="keyword">this</span>._1, b._1),
            squishy.concat(<span class="keyword">this</span>._2, b._2),
            squishy.concat(<span class="keyword">this</span>._3, b._3),
            squishy.concat(<span class="keyword">this</span>._4, b._4),
            squishy.concat(<span class="keyword">this</span>._5, b._5)
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-221">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-221">&#182;</a>
              </div>
              <h3>equal(a)</h3>
<p> Compare two option values for equality</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple5.prototype.equal = <span class="keyword">function</span>(b) {
        <span class="keyword">return</span> squishy.equal(<span class="keyword">this</span>.toArray(), b.toArray());
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-222">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-222">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Bind through the tuple of the tuples
 Monadic flatMap/bind</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple5.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> f(<span class="keyword">this</span>);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-223">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-223">&#182;</a>
              </div>
              <h3>toArray()</h3>
<p> Return an array with each element of the tuple.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Tuple5.prototype.toArray = <span class="keyword">function</span>() {
        <span class="keyword">return</span> [<span class="keyword">this</span>._1, <span class="keyword">this</span>._2, <span class="keyword">this</span>._3, <span class="keyword">this</span>._4, <span class="keyword">this</span>._5];
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-224">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-224">&#182;</a>
              </div>
              <h2>isTuple2(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>Tuple2</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isTuple2 = isInstanceOf(Tuple2);</pre></div></div>
            
        </li>
        
        
        <li id="section-225">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-225">&#182;</a>
              </div>
              <h2>isTuple4(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>Tuple3</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isTuple3 = isInstanceOf(Tuple3);</pre></div></div>
            
        </li>
        
        
        <li id="section-226">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-226">&#182;</a>
              </div>
              <h2>isTuple4(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>Tuple4</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isTuple4 = isInstanceOf(Tuple4);</pre></div></div>
            
        </li>
        
        
        <li id="section-227">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-227">&#182;</a>
              </div>
              <h2>isTuple5(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>Tuple5</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isTuple5 = isInstanceOf(Tuple5);</pre></div></div>
            
        </li>
        
        
        <li id="section-228">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-228">&#182;</a>
              </div>
              <h2>isTuple(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>Tuple</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isTuple = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span>  isTuple2(a) ||
                isTuple3(a) ||
                isTuple4(a) ||
                isTuple5(a);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-229">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-229">&#182;</a>
              </div>
              <h2>arbTuple(a)</h2>
<p> Returns an arbitrary <code>Tuple</code> with the right set of values.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> arbTuple = curry(<span class="keyword">function</span>(t, n) {
        <span class="keyword">return</span> <span class="keyword">function</span>(a, s) {
            <span class="keyword">var</span> env = <span class="keyword">this</span>;
            <span class="keyword">return</span> t.of.apply(<span class="keyword">this</span>, env.map(
                env.fill(n)(<span class="keyword">function</span>(i) {
                    <span class="keyword">return</span> a.types[i];
                }),
                <span class="keyword">function</span>(arg) {
                    <span class="keyword">return</span> env.arb(arg, s);
                }
            ));
        };
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-230">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-230">&#182;</a>
              </div>
              <h2>tuple2Of(a, b)</h2>
<p> Sentinel value for when an tuple2 of a particular type is needed:</p>
<pre><code>  tuple2Of(Number, Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">tuple2Of</span><span class="params">(a, b)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, tuple2Of);
        self.types = rest(arguments);
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-231">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-231">&#182;</a>
              </div>
              <h2>isTuple2Of(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>tuple2Of</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isTuple2Of = isInstanceOf(tuple2Of);</pre></div></div>
            
        </li>
        
        
        <li id="section-232">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-232">&#182;</a>
              </div>
              <h2>tuple3Of(a, b, c)</h2>
<p> Sentinel value for when an tuple3 of a particular type is needed:</p>
<pre><code>  tuple3Of(Number, Number, Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">tuple3Of</span><span class="params">(a, b, c)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, tuple3Of);
        self.types = rest(arguments);
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-233">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-233">&#182;</a>
              </div>
              <h2>isTuple3Of(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>tuple3Of</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isTuple3Of = isInstanceOf(tuple3Of);</pre></div></div>
            
        </li>
        
        
        <li id="section-234">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-234">&#182;</a>
              </div>
              <h2>tuple4Of(a, b, c, d)</h2>
<p> Sentinel value for when an tuple4 of a particular type is needed:</p>
<pre><code>  tuple4Of(Number, Number, Number, Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">tuple4Of</span><span class="params">(a, b, c, d)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, tuple4Of);
        self.types = rest(arguments);
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-235">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-235">&#182;</a>
              </div>
              <h2>isTuple4Of(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>tuple4Of</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isTuple4Of = isInstanceOf(tuple4Of);</pre></div></div>
            
        </li>
        
        
        <li id="section-236">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-236">&#182;</a>
              </div>
              <h2>tuple5Of(a, b, c, d, e)</h2>
<p> Sentinel value for when an tuple5 of a particular type is needed:</p>
<pre><code>  tuple5Of(Number, Number, Number, Number, Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">tuple5Of</span><span class="params">(a, b, c, d, e)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, tuple5Of);
        self.types = rest(arguments);
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-237">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-237">&#182;</a>
              </div>
              <h2>isTuple5Of(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>tuple5Of</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isTuple5Of = isInstanceOf(tuple5Of);</pre></div></div>
            
        </li>
        
        
        <li id="section-238">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-238">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'Tuple2'</span>, Tuple2)
        .property(<span class="string">'Tuple3'</span>, Tuple3)
        .property(<span class="string">'Tuple4'</span>, Tuple4)
        .property(<span class="string">'Tuple5'</span>, Tuple5)
        .property(<span class="string">'tuple2Of'</span>, tuple2Of)
        .property(<span class="string">'tuple3Of'</span>, tuple3Of)
        .property(<span class="string">'tuple4Of'</span>, tuple4Of)
        .property(<span class="string">'tuple5Of'</span>, tuple5Of)
        .property(<span class="string">'isTuple2'</span>, isTuple2)
        .property(<span class="string">'isTuple3'</span>, isTuple3)
        .property(<span class="string">'isTuple4'</span>, isTuple4)
        .property(<span class="string">'isTuple5'</span>, isTuple5)
        .property(<span class="string">'isTuple2Of'</span>, isTuple2Of)
        .property(<span class="string">'isTuple3Of'</span>, isTuple3Of)
        .property(<span class="string">'isTuple4Of'</span>, isTuple4Of)
        .property(<span class="string">'isTuple5Of'</span>, isTuple5Of)
        .method(<span class="string">'arb'</span>, isTuple2Of, arbTuple(Tuple2, <span class="number">2</span>))
        .method(<span class="string">'arb'</span>, isTuple3Of, arbTuple(Tuple3, <span class="number">3</span>))
        .method(<span class="string">'arb'</span>, isTuple4Of, arbTuple(Tuple4, <span class="number">4</span>))
        .method(<span class="string">'arb'</span>, isTuple5Of, arbTuple(Tuple5, <span class="number">5</span>))
        .method(<span class="string">'shrink'</span>, isTuple, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> [];
        })
        .method(<span class="string">'concat'</span>, isTuple, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.concat(b);
        })
        .method(<span class="string">'equal'</span>, isTuple, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.equal(b);
        })
        .method(<span class="string">'chain'</span>, isTuple, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.chain(b);
        })
        .method(<span class="string">'toArray'</span>, isTuple, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.toArray();
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-239">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-239">&#182;</a>
              </div>
              <h2>Promise(deferred)</h2>
<p> Promise is a constructor which takes a <code>deferred</code> function. The <code>deferred</code>
 function takes two arguments:</p>
<pre><code>  deferred(resolve)</code></pre>
<p> <code>resolve</code> are side-effecting callbacks.</p>
<h3>deferred(resolve)</h3>
<p> The <code>resolve</code> callback will be called with an <code>Attempt</code>. The <code>Attempt</code> can
 either be a Success or a Failure.</p>
<ul>
<li><code>chain(f)</code> - Monadic flatMap/bind</li>
<li><code>extract()</code> - extract the value from attempt</li>
<li><code>map(f)</code> - Functor map for resolve</li>
<li><code>reject(f)</code> - Functor map for reject</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> Promise = tagged(<span class="string">'Promise'</span>, [<span class="string">'fork'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-240">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-240">&#182;</a>
              </div>
              <h3>of(x)</h3>
<p> Creates a Promise that contains a successful value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Promise.of = <span class="keyword">function</span>(x) {
        <span class="keyword">return</span> Promise(
            <span class="keyword">function</span>(resolve, reject) {
                <span class="keyword">return</span> resolve(x);
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-241">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-241">&#182;</a>
              </div>
              <h3>empty()</h3>
<p> Creates a Empty Promise that contains no value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Promise.empty = <span class="keyword">function</span>() {
        <span class="keyword">return</span> Promise.of();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-242">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-242">&#182;</a>
              </div>
              <h3>error(x)</h3>
<p> Creates a Promise that contains a failure value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Promise.error = <span class="keyword">function</span>(x) {
        <span class="keyword">return</span> Promise(
            <span class="keyword">function</span>(resolve, reject) {
                <span class="keyword">return</span> reject(x);
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-243">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-243">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Returns a new promise that evaluates <code>f</code> when the current promise
 is successfully fulfilled. <code>f</code> must return a new promise.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Promise.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> Promise(
            <span class="keyword">function</span>(resolve, reject) {
                <span class="keyword">return</span> env.fork(
                    <span class="keyword">function</span>(a) {
                        <span class="keyword">return</span> f(a).fork(resolve, reject);
                    },
                    reject
                );
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-244">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-244">&#182;</a>
              </div>
              <h3>extract()</h3>
<p> Executes a promise to get a value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Promise.prototype.extract = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.fork(
            <span class="keyword">function</span>(a) {
                <span class="keyword">return</span> a;
            },
            <span class="keyword">function</span>(e) {
                <span class="keyword">return</span> e;
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-245">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-245">&#182;</a>
              </div>
              <h3>map(f)</h3>
<p> Returns a new promise that evaluates <code>f</code> on a value and passes it
 through to the resolve function.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Promise.prototype.map = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> Promise(
            <span class="keyword">function</span>(resolve, reject) {
                <span class="keyword">return</span> env.fork(
                    <span class="keyword">function</span>(a) {
                        <span class="keyword">return</span> resolve(f(a));
                    },
                    reject
                );
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-246">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-246">&#182;</a>
              </div>
              <h3>reject(f)</h3>
<p> Returns a new promise that evaluates <code>f</code> when the current promise
 fails. <code>f</code> must return a new promise.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Promise.prototype.reject = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> Promise(
            <span class="keyword">function</span>(resolve, reject) {
                <span class="keyword">return</span> env.fork(
                    resolve,
                    <span class="keyword">function</span>(a) {
                        <span class="keyword">return</span> f(a).fork(resolve, reject);
                    }
                );
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-247">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-247">&#182;</a>
              </div>
              <h2>isPromise(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>Promise</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isPromise = isInstanceOf(Promise);</pre></div></div>
            
        </li>
        
        
        <li id="section-248">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-248">&#182;</a>
              </div>
              <h2>promiseOf(type)</h2>
<p> Sentinel value for when an promise of a particular type is needed:</p>
<pre><code>  promiseOf(Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">promiseOf</span><span class="params">(type)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, promiseOf);
        self.type = type;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-249">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-249">&#182;</a>
              </div>
              <h2>isPromiseOf(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>promiseOf</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isPromiseOf = isInstanceOf(promiseOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-250">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-250">&#182;</a>
              </div>
              <h3>Fantasy Overload</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fo.unsafeSetValueOf(Promise.prototype);</pre></div></div>
            
        </li>
        
        
        <li id="section-251">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-251">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'Promise'</span>, Promise)
        .property(<span class="string">'promiseOf'</span>, promiseOf)
        .property(<span class="string">'isPromise'</span>, isPromise)
        .property(<span class="string">'isPromiseOf'</span>, isPromiseOf)
        .method(<span class="string">'empty'</span>, strictEquals(Promise), <span class="keyword">function</span>() {
            <span class="keyword">return</span> Promise.empty();
        })
        .method(<span class="string">'of'</span>, strictEquals(Promise), <span class="keyword">function</span>(x) {
            <span class="keyword">return</span> Promise.of(x);
        })
        .method(<span class="string">'chain'</span>, isPromise, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.chain(b);
        })
        .method(<span class="string">'extract'</span>, isPromise, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a.extract();
        })
        .method(<span class="string">'map'</span>, isPromise, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.map(b);
        })
        .method(<span class="string">'arb'</span>, isPromiseOf, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> Promise.of(<span class="keyword">this</span>.arb(a.type, b - <span class="number">1</span>));
        })
        .method(<span class="string">'shrink'</span>, isPromise, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> [];
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-252">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-252">&#182;</a>
              </div>
              <h1>Trampoline</h1>
<p> Reifies continutations onto the heap, rather than the stack. Allows
 efficient tail calls.</p>
<p> Example usage:</p>
<pre><code>  function loop(n) {
      function inner(i) {
          if(i == n) return squishy.done(n);
          return squishy.cont(function() {
              return inner(i + 1);
          });
      }

      return squishy.trampoline(inner(0));
  }</code></pre>
<p> Where <code>loop</code> is the identity function for positive numbers. Without
 trampolining, this function would take <code>n</code> stack frames.</p>

            </div>
            
        </li>
        
        
        <li id="section-253">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-253">&#182;</a>
              </div>
              <h2>done(result)</h2>
<p> Result constructor for a continuation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">done</span><span class="params">(result)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, done);
        self.isDone = <span class="literal">true</span>;
        self.result = result;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-254">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-254">&#182;</a>
              </div>
              <h2>cont(thunk)</h2>
<p> Continuation constructor. <code>thunk</code> is a nullary closure, resulting
 in a <code>done</code> or a <code>cont</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">cont</span><span class="params">(thunk)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, cont);
        self.isDone = <span class="literal">false</span>;
        self.thunk = thunk;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-255">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-255">&#182;</a>
              </div>
              <h2>trampoline(bounce)</h2>
<p> The beginning of the continuation to call. Will repeatedly evaluate
 <code>cont</code> thunks until it gets to a <code>done</code> value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">trampoline</span><span class="params">(bounce)</span> {</span>
        <span class="keyword">while</span>(!bounce.isDone) {
            bounce = bounce.thunk();
        }
        <span class="keyword">return</span> bounce.result;
    }
    
    squishy = squishy
        .property(<span class="string">'done'</span>, done)
        .property(<span class="string">'cont'</span>, cont)
        .property(<span class="string">'trampoline'</span>, trampoline);</pre></div></div>
            
        </li>
        
        
        <li id="section-256">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-256">&#182;</a>
              </div>
              <h2>Stream(fork)</h2>
<p> The Stream type represents a flow of data ever evolving values over time.</p>
<p> Here is an example of a number piped through to the console.</p>
<pre><code>   Stream.of(1).map(
       function (a) {
           return a + 1;
       }
   ).fork(console.log);</code></pre>
<ul>
<li><code>ap(a, b)</code> - Applicative ap(ply)</li>
<li><code>concat(a, b)</code> - Appends two stream objects.</li>
<li><code>drop(a, n)</code> - Returns the stream without its n first elements. If this stream has less than n elements, the empty stream is returned.</li>
<li><code>filter(a, f)</code> - Returns all the elements of this stream that satisfy the predicate p.</li>
<li><code>chain(a, f)</code> - Applies the given function f to each element of this stream, then concatenates the results.</li>
<li><code>fold(a, v, f)</code> - Combines the elements of this stream together using the binary function f, from Left to Right, and starting with the value v.</li>
<li><code>map(a, f)</code> - Returns the stream resulting from applying the given function f to each element of this stream.</li>
<li><code>scan(a, f)</code> - Combines the elements of this stream together using the binary operator op, from Left to Right</li>
<li><code>take(n)</code> - Returns the n first elements of this stream.</li>
<li><code>zip(a, b)</code> - Returns a stream formed from this stream and the specified stream that by associating each element of the former with the element at the same position in the latter.</li>
<li><code>zipWithIndex(a)</code> -  Returns a stream form from this stream and a index of the value that is associated with each element index position.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> Stream = tagged(<span class="string">'Stream'</span>, [<span class="string">'fork'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-257">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-257">&#182;</a>
              </div>
              <h3>of(x)</h3>
<p> Creates a stream that contains a successful value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.of = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> Stream(
            <span class="keyword">function</span>(next, done) {
                squishy.toOption(a).fold(
                    next,
                    nothing
                );
                <span class="keyword">return</span> done();
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-258">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-258">&#182;</a>
              </div>
              <h3>empty()</h3>
<p> Creates a Empty stream that contains no value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.empty = <span class="keyword">function</span>() {
        <span class="keyword">return</span> Stream.of();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-259">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-259">&#182;</a>
              </div>
              <h3>ap(b)</h3>
<p> Apply a function in the environment of the success of this stream
 Applicative ap(ply)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.ap = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(
            <span class="keyword">function</span>(f) {
                <span class="keyword">return</span> a.map(f);
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-260">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-260">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Returns a new stream that evaluates <code>f</code> when the current stream
 is successfully fulfilled. <code>f</code> must return a new stream.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> Stream(<span class="keyword">function</span>(next, done) {
            <span class="keyword">return</span> env.fork(
                <span class="keyword">function</span>(a) {
                    <span class="keyword">return</span> f(a).fork(next, nothing);
                },
                done
            );
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-261">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-261">&#182;</a>
              </div>
              <h3>concat(s, f)</h3>
<p> Concatenate two streams associatively together.
 Semigroup concat</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.concat = <span class="keyword">function</span>(a) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> Stream(<span class="keyword">function</span>(next, done) {
            <span class="keyword">return</span> env.fork(
                next,
                <span class="keyword">function</span>() {
                    <span class="keyword">return</span> a.fork(next, done);
                }
            );
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-262">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-262">&#182;</a>
              </div>
              <h3>drop(f)</h3>
<p> Returns the stream without its n first elements.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.drop = <span class="keyword">function</span>(n) {
        <span class="keyword">var</span> dropped = <span class="number">0</span>;
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(
            <span class="keyword">function</span>(a) {
                <span class="keyword">if</span> (dropped &lt; n) {
                    dropped++;
                    <span class="keyword">return</span> Stream.empty();
                } <span class="keyword">else</span> {
                    <span class="keyword">return</span> Stream.of(a);
                }
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-263">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-263">&#182;</a>
              </div>
              <h3>equal(a)</h3>
<p> Compare two stream values for equality</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.equal = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> <span class="keyword">this</span>.zip(a).fold(
            <span class="literal">true</span>,
            <span class="keyword">function</span>(v, t) {
                <span class="keyword">return</span> v &amp;&amp; squishy.equal(t._1, t._2);
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-264">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-264">&#182;</a>
              </div>
              <h3>extract(a)</h3>
<p> Extract the value from the stream.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.extract = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.fork(
            identity,
            constant(<span class="literal">null</span>)
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-265">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-265">&#182;</a>
              </div>
              <h3>filter(f)</h3>
<p> Returns all the elements of this stream that satisfy the predicate p.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.filter = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> Stream(<span class="keyword">function</span>(next, done) {
            <span class="keyword">return</span> env.fork(
                <span class="keyword">function</span>(a) {
                    <span class="keyword">if</span> (f(a)) {
                        next(a);
                    }
                },
                done
            );
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-266">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-266">&#182;</a>
              </div>
              <h3>fold(v, f)</h3>
<p> Combines the elements of this stream together using the binary function f</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.fold = <span class="keyword">function</span>(v, f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> Stream(
            <span class="keyword">function</span>(next, done) {
                <span class="keyword">return</span> env.fork(
                    <span class="keyword">function</span>(a) {
                        v = f(v, a);
                        <span class="keyword">return</span> v;
                    },
                    <span class="keyword">function</span>() {
                        next(v);
                        <span class="keyword">return</span> done();
                    }
                );
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-267">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-267">&#182;</a>
              </div>
              <h3>length()</h3>
<p> Returns the length of the stream</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.length = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.map(
            constant(<span class="number">1</span>)
        ).fold(
            <span class="number">0</span>,
            curry(<span class="keyword">function</span>(x, y) {
                <span class="keyword">return</span> x + y;
            })
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-268">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-268">&#182;</a>
              </div>
              <h3>map(f)</h3>
<p> Returns the stream resulting from applying the given function f to each
 element of this stream.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.map = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(
            <span class="keyword">function</span>(a) {
                <span class="keyword">return</span> Stream.of(f(a));
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-269">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-269">&#182;</a>
              </div>
              <h3>merge(a)</h3>
<p> Merge the values of two streams in to one stream</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.merge = <span class="keyword">function</span>(a) {
        <span class="keyword">var</span> resolver;
    
        <span class="keyword">this</span>.map(optional(resolver));
        a.map(optional(resolver));
    
        <span class="keyword">return</span> Stream(
            <span class="keyword">function</span>(next, done) {
                resolver = next;
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-270">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-270">&#182;</a>
              </div>
              <h3>pipe(a)</h3>
<p> Pipe a stream to a state or writer monad.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.pipe = <span class="keyword">function</span>(o) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> Stream(
            <span class="keyword">function</span>(next, done) {
                <span class="keyword">return</span> env.fork(
                    <span class="keyword">function</span>(v) {
                        <span class="keyword">return</span> o.run(v);
                    },
                    done
                );
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-271">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-271">&#182;</a>
              </div>
              <h3>scan(a)</h3>
<p> Combines the elements of this stream together using the binary operator
 op, from Left to Right</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.scan = <span class="keyword">function</span>(a, f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> Stream(
            <span class="keyword">function</span>(next, done) {
                <span class="keyword">return</span> env.fork(
                    <span class="keyword">function</span>(b) {
                        a = f(a, b);
                        <span class="keyword">return</span> next(a);
                    },
                    done
                );
            });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-272">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-272">&#182;</a>
              </div>
              <h3>take(v, f)</h3>
<p> Returns the n first elements of this stream.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.take = <span class="keyword">function</span>(n) {
        <span class="keyword">var</span> taken = <span class="number">0</span>;
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(
            <span class="keyword">function</span>(a) {
                <span class="keyword">return</span> (++taken &lt; n) ? Stream.of(a) : Stream.empty();
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-273">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-273">&#182;</a>
              </div>
              <h3>zip(b)</h3>
<p> Returns a stream formed from this stream and the specified stream that
 by associating each element of the former with the element at the same
 position in the latter.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.zip = <span class="keyword">function</span>(a) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
    
        <span class="keyword">return</span> Stream(
            <span class="keyword">function</span>(next, done) {
                <span class="keyword">var</span> left = [],
                    right = [],
                    end = once(done);
    
                env.fork(
                    <span class="keyword">function</span>(a) {
                        <span class="keyword">if</span> (right.length &gt; <span class="number">0</span>) {
                            next(Tuple2(a, right.shift()));
                        } <span class="keyword">else</span> {
                            left.push(a);
                        }
                    },
                    end
                );
    
                a.fork(
                    <span class="keyword">function</span>(a) {
                        <span class="keyword">if</span> (left.length &gt; <span class="number">0</span>) {
                            next(Tuple2(left.shift(), a));
                        } <span class="keyword">else</span> {
                            right.push(a);
                        }
                    },
                    end
                );
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-274">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-274">&#182;</a>
              </div>
              <h3>zipWithIndex()</h3>
<p> Returns a stream form from this stream and a index of the value that
 is associated with each element index position.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.prototype.zipWithIndex = <span class="keyword">function</span>() {
        <span class="keyword">var</span> index = <span class="number">0</span>;
        <span class="keyword">return</span> <span class="keyword">this</span>.map(
            <span class="keyword">function</span>(a) {
                <span class="keyword">return</span> Tuple2(a, index++);
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-275">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-275">&#182;</a>
              </div>
              <h2>fromArray(a)</h2>
<p> Returns a new stream which iterates over each element of the array.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Stream.fromArray = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> Stream(
            <span class="keyword">function</span>(next, done) {
                squishy.map(a, next);
                <span class="keyword">return</span> done();
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-276">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-276">&#182;</a>
              </div>
              <h2>isStream(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>Stream</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isStream = isInstanceOf(Stream);</pre></div></div>
            
        </li>
        
        
        <li id="section-277">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-277">&#182;</a>
              </div>
              <h2>streamOf(type)</h2>
<p> Sentinel value for when an stream of a particular type is needed:</p>
<pre><code>  streamOf(Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">streamOf</span><span class="params">(type)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, streamOf);
        self.type = type;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-278">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-278">&#182;</a>
              </div>
              <h2>isStreamOf(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>streamOf</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isStreamOf = isInstanceOf(streamOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-279">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-279">&#182;</a>
              </div>
              <h3>Fantasy Overload</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fo.unsafeSetValueOf(Stream.prototype);</pre></div></div>
            
        </li>
        
        
        <li id="section-280">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-280">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'Stream'</span>, Stream)
        .property(<span class="string">'streamOf'</span>, streamOf)
        .property(<span class="string">'isStream'</span>, isStream)
        .property(<span class="string">'isStreamOf'</span>, isStreamOf)
        .method(<span class="string">'arb'</span>, isStreamOf, <span class="keyword">function</span>(a, b) {
            <span class="keyword">var</span> args = <span class="keyword">this</span>.arb(a.type, b - <span class="number">1</span>);
            <span class="keyword">return</span> Stream.fromArray(args);
        })
        .method(<span class="string">'shrink'</span>, isStream, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> [];
        })
        .method(<span class="string">'ap'</span>, isStream, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.ap(b);
        })
        .method(<span class="string">'chain'</span>, isStream, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.chain(b);
        })
        .method(<span class="string">'concat'</span>, isStream, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.chain(b);
        })
        .method(<span class="string">'equal'</span>, isStream, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.equal(b);
        })
        .method(<span class="string">'extract'</span>, isStream, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a.extract();
        })
        .method(<span class="string">'fold'</span>, isStream, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.chain(b);
        })
        .method(<span class="string">'map'</span>, isStream, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.map(b);
        })
        .method(<span class="string">'zip'</span>, isStream, <span class="keyword">function</span>(b) {
            <span class="keyword">return</span> a.zip(b);
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-281">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-281">&#182;</a>
              </div>
              <h1>Identity</h1>
<p> The Identity monad is a monad that does not embody any computational
 strategy. It simply applies the bound function to its input without
 any modification.</p>
<ul>
<li>ap(a) - applicative ap(ply)</li>
<li>chain(f) - chain values</li>
<li><code>concat(s, plus)</code> - Semigroup concat</li>
<li>map(f) - functor map</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> Identity = tagged(<span class="string">'Identity'</span>, [<span class="string">'x'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-282">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-282">&#182;</a>
              </div>
              <h2>of(x)</h2>
<p> Constructor <code>of</code> Monad creating <code>Identity</code> for the value of <code>x</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Identity.of = Identity;</pre></div></div>
            
        </li>
        
        
        <li id="section-283">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-283">&#182;</a>
              </div>
              <h3>ap(b)</h3>
<p> Apply a function in the environment of the value of the identity
 Applicative ap(ply)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Identity.prototype.ap = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(<span class="keyword">function</span>(f) {
            <span class="keyword">return</span> squishy.map(a, f);
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-284">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-284">&#182;</a>
              </div>
              <h3>concat(b)</h3>
<p> Concatenate two identities associatively together.
 Semigroup concat</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Identity.prototype.concat = <span class="keyword">function</span>(a) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> <span class="keyword">this</span>.map(<span class="keyword">function</span>(f) {
            <span class="keyword">return</span> squishy.concat(env.x, a.x);
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-285">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-285">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Bind through the value of the identity
 Monadic flatMap/bind</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Identity.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> f(<span class="keyword">this</span>.x);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-286">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-286">&#182;</a>
              </div>
              <h3>equal(a)</h3>
<p> Compare two option values for equality</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Identity.prototype.equal = <span class="keyword">function</span>(b) {
        <span class="keyword">return</span> squishy.equal(<span class="keyword">this</span>.x, b.x);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-287">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-287">&#182;</a>
              </div>
              <h3>map(f)</h3>
<p> Map on the value of this identity.
 Functor map</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Identity.prototype.map = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(<span class="keyword">function</span>(a) {
            <span class="keyword">return</span> Identity.of(f(a));
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-288">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-288">&#182;</a>
              </div>
              <h3>negate(b)</h3>
<p> Negate two identities associatively together.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Identity.prototype.negate = <span class="keyword">function</span>() {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> <span class="keyword">this</span>.map(<span class="keyword">function</span>(f) {
            <span class="keyword">return</span> squishy.negate(env.x);
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-289">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-289">&#182;</a>
              </div>
              <h2>isIdentity(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>Identity</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isIdentity = isInstanceOf(Identity);</pre></div></div>
            
        </li>
        
        
        <li id="section-290">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-290">&#182;</a>
              </div>
              <h2>Identity Transformer</h2>
<p> The trivial monad transformer, which maps a monad to an equivalent monad.</p>
<ul>
<li>chain(f) - chain values</li>
<li>map(f) - functor map</li>
<li>ap(a) - applicative ap(ply)</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Identity.IdentityT = <span class="keyword">function</span>(M) {
    
        <span class="keyword">var</span> IdentityT = tagged(<span class="string">'IdentityT'</span>, [<span class="string">'run'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-291">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-291">&#182;</a>
              </div>
              <h2>of(x)</h2>
<p> Constructor <code>of</code> Monad creating <code>IdentityT</code> for the value of <code>x</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        IdentityT.of = <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> IdentityT(point(M)(a));
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-292">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-292">&#182;</a>
              </div>
              <h2>empty()</h2>
<p> Constructor <code>empty</code> Monad creating <code>IdentityT</code> for the
 value of <code>M.empty()</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        Identity.empty = <span class="keyword">function</span>() {
            <span class="keyword">return</span> Identity.of(empty(M)());
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-293">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-293">&#182;</a>
              </div>
              <h3>lift(b)</h3>
<p> Lift the <code>Identity</code> to a new <code>IdentityT</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        IdentityT.lift = IdentityT;</pre></div></div>
            
        </li>
        
        
        <li id="section-294">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-294">&#182;</a>
              </div>
              <h3>ap(b)</h3>
<p> Apply a function in the environment of the value of the identity
 transformer
 Applicative ap(ply)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        IdentityT.prototype.ap = <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> <span class="keyword">this</span>.chain(<span class="keyword">function</span>(f) {
                <span class="keyword">return</span> a.map(f);
            });
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-295">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-295">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Bind through the value of the identity transformer
 Monadic flatMap/bind</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        IdentityT.prototype.chain = <span class="keyword">function</span>(f) {
            <span class="keyword">return</span> IdentityT(<span class="keyword">this</span>.run.chain(<span class="keyword">function</span>(x) {
                <span class="keyword">return</span> f(x).run;
            }));
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-296">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-296">&#182;</a>
              </div>
              <h3>map(f)</h3>
<p> Map on the value of this identity.
 Functor map</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        IdentityT.prototype.map = <span class="keyword">function</span>(f) {
            <span class="keyword">return</span> <span class="keyword">this</span>.chain(<span class="keyword">function</span>(a) {
                <span class="keyword">return</span> IdentityT.of(f(a));
            });
        };
    
        <span class="keyword">return</span> IdentityT;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-297">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-297">&#182;</a>
              </div>
              <h2>identityOf(type)</h2>
<p> Sentinel value for when an identity of a particular type is needed:</p>
<pre><code>  identityOf(Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">identityOf</span><span class="params">(type)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, identityOf);
        self.type = type;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-298">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-298">&#182;</a>
              </div>
              <h2>isFailureOf(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>identityOf</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isIdentityOf = isInstanceOf(identityOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-299">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-299">&#182;</a>
              </div>
              <h3>Fantasy Overload</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fo.unsafeSetValueOf(Identity.prototype);</pre></div></div>
            
        </li>
        
        
        <li id="section-300">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-300">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'Identity'</span>, Identity)
        .property(<span class="string">'IdentityT'</span>, Identity.IdentityT)
        .property(<span class="string">'identityOf'</span>, identityOf)
        .property(<span class="string">'isIdentity'</span>, isIdentity)
        .property(<span class="string">'isIdentityOf'</span>, isIdentityOf)
        .method(<span class="string">'arb'</span>, isIdentityOf, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> Identity(<span class="keyword">this</span>.arb(a.type, b - <span class="number">1</span>));
        })
        .method(<span class="string">'of'</span>, strictEquals(Identity), <span class="keyword">function</span>(x) {
            <span class="keyword">return</span> Identity.of(x);
        })
        .method(<span class="string">'ap'</span>, isIdentity, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.ap(b);
        })
        .method(<span class="string">'concat'</span>, isIdentity, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.concat(b);
        })
        .method(<span class="string">'chain'</span>, isIdentity, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.chain(b);
        })
        .method(<span class="string">'empty'</span>, strictEquals(Identity), <span class="keyword">function</span>() {
            <span class="keyword">return</span> Identity.empty();
        })
        .method(<span class="string">'equal'</span>, isIdentity, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.equal(b);
        })
        .method(<span class="string">'map'</span>, isIdentity, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.map(b);
        })
        .method(<span class="string">'negate'</span>, isIdentity, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a.negate();
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-301">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-301">&#182;</a>
              </div>
              <h1>Input/output</h1>
<p> Purely functional IO wrapper.</p>

            </div>
            
        </li>
        
        
        <li id="section-302">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-302">&#182;</a>
              </div>
              <h2>IO(f)</h2>
<p> Pure wrapper around a side-effecting <code>f</code> function.</p>
<ul>
<li>perform() - action to be called a single time per program</li>
<li>flatMap(f) - monadic flatMap/bind</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> IO = tagged(<span class="string">'IO'</span>, [<span class="string">'unsafePerform'</span>]);
    
    IO.of = <span class="keyword">function</span>(x) {
        <span class="keyword">return</span> IO(<span class="keyword">function</span>() {
            <span class="keyword">return</span> x;
        });
    };
    
    IO.prototype.ap = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(<span class="keyword">function</span>(f) {
            <span class="keyword">return</span> squishy.map(a, f);
        });
    };
    
    IO.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> IO(<span class="keyword">function</span>() {
            <span class="keyword">return</span> f(env.unsafePerform()).unsafePerform();
        });
    };
    
    IO.prototype.map = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(<span class="keyword">function</span>(a) {
            <span class="keyword">return</span> IO.of(f(a));
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-303">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-303">&#182;</a>
              </div>
              <h2>isIO(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an <code>io</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isIO = isInstanceOf(IO);
    
    squishy = squishy
        .property(<span class="string">'IO'</span>, IO)
        .property(<span class="string">'isIO'</span>, isIO)
        .method(<span class="string">'of'</span>, strictEquals(IO), <span class="keyword">function</span>(m, a) {
            <span class="keyword">return</span> IO.of(a);
        })
        .method(<span class="string">'ap'</span>, isIO, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.ap(b);
        })
        .method(<span class="string">'chain'</span>, isIO, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.chain(b);
        })
        .method(<span class="string">'map'</span>, isIO, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.map(b);
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-304">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-304">&#182;</a>
              </div>
              <h2>Lens</h2>
<ul>
<li><code>identityLens()</code> - Identity lens that returns the original target.</li>
<li><code>objectLens()</code> - Lens access for a object at a given property.</li>
<li><code>arrayLens()</code> - Lens access for an array at a given index.</li>
<li><code>parse(s)</code> - Parse a string to for a chain of lenses</li>
<li><code>andThen(b)</code> - Helper method to enable chaining of lens objects.</li>
<li><code>compose(b)</code> - Enabling of composing lenses together.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    
    <span class="keyword">var</span> Lens = tagged(<span class="string">'Lens'</span>, [<span class="string">'run'</span>]),
        PartialLens = tagged(<span class="string">'PartialLens'</span>, [<span class="string">'run'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-305">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-305">&#182;</a>
              </div>
              <h3>identityLens</h3>
<p> Identity lens that returns the original target.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Lens.identityLens = <span class="keyword">function</span>() {
        <span class="keyword">return</span> Lens(<span class="keyword">function</span>(target) {
            <span class="keyword">return</span> Store(
                identity,
                <span class="keyword">function</span>() {
                    <span class="keyword">return</span> target;
                }
            );
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-306">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-306">&#182;</a>
              </div>
              <h3>objectLens</h3>
<p> Lens access for a object at a given property.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Lens.objectLens = <span class="keyword">function</span>(property) {
        <span class="keyword">return</span> Lens(<span class="keyword">function</span>(o) {
            <span class="keyword">return</span> Store(
                <span class="keyword">function</span>(s) {
                    <span class="keyword">return</span> extend(o, singleton(property, s));
                },
                <span class="keyword">function</span>() {
                    <span class="keyword">return</span> o[property];
                }
            );
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-307">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-307">&#182;</a>
              </div>
              <h3>arrayLens</h3>
<p> Lens access for an array at a given index.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Lens.arrayLens = <span class="keyword">function</span>(index) {
        <span class="keyword">return</span> Lens(<span class="keyword">function</span>(a) {
            <span class="keyword">return</span> Store(
                <span class="keyword">function</span>(s) {
                    <span class="keyword">var</span> m = a.slice();
                    m[index] = s;
                    <span class="keyword">return</span> m;
                },
                <span class="keyword">function</span>() {
                    <span class="keyword">return</span> a[index];
                }
            );
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-308">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-308">&#182;</a>
              </div>
              <h3>parse(s)</h3>
<p> Parse a formatted string of accessors to create a series of
 lenses that can access a object</p>
<p> The following example will return a the value of <code>e</code>.</p>
<pre><code>     Lens.parse(&#39;c.z.i[0].e&#39;).run(a).get();</code></pre>
<p> The following example will return a new object with the
 updated value of <code>e</code>.</p>
<pre><code>     Lens.parse(&#39;c.z.i[0].e&#39;).run(a).set(b);</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Lens.parse = <span class="keyword">function</span>(s) {
        <span class="keyword">return</span> squishy.fold(s.split(<span class="string">'.'</span>), Lens.identityLens(), <span class="keyword">function</span>(a, b) {
            <span class="keyword">var</span> access = squishy.fold(b.split(<span class="string">'['</span>), Lens.identityLens(), <span class="keyword">function</span>(a, b) {
                <span class="keyword">var</span> n = parseInt(b, <span class="number">10</span>);
    
                <span class="keyword">return</span> a.andThen(
                    (isNumber(n) &amp;&amp; isNotNaN(n)) ?
                    Lens.arrayLens(n) :
                       (isString(b) &amp;&amp; squishy.isEmpty(b)) ?
                       Lens.identityLens() :
                       Lens.objectLens(b)
                );
            });
    
            <span class="keyword">return</span> a.andThen(access);
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-309">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-309">&#182;</a>
              </div>
              <h3>andThen</h3>
<p> Helper method to enable chaining of lens objects.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Lens.prototype.andThen = <span class="keyword">function</span>(b) {
        <span class="keyword">return</span> b.compose(<span class="keyword">this</span>);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-310">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-310">&#182;</a>
              </div>
              <h3>compose</h3>
<p> Enabling of composing lenses together.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Lens.prototype.compose = <span class="keyword">function</span>(b) {
        <span class="keyword">var</span> a = <span class="keyword">this</span>;
        <span class="keyword">return</span> Lens(<span class="keyword">function</span>(target) {
            <span class="keyword">var</span> c = b.run(target),
                d = a.run(c.get());
    
            <span class="keyword">return</span> Store(
                compose(c.set, d.set),
                d.get
            );
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-311">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-311">&#182;</a>
              </div>
              <h3>toPartail</h3>
<p> Return an partial lens from a lens.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Lens.prototype.toPartial = <span class="keyword">function</span>() {
        <span class="keyword">var</span> self = <span class="keyword">this</span>;
        <span class="keyword">return</span> PartialLens(<span class="keyword">function</span>(target) {
            <span class="keyword">return</span> Option.Some(self.run(target));
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-312">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-312">&#182;</a>
              </div>
              <h2>PartialLens</h2>
<ul>
<li><code>identityLens()</code> - Identity lens that returns the original target.</li>
<li><code>objectLens()</code> - Lens access for a object at a given property.</li>
<li><code>arrayLens()</code> - Lens access for an array at a given index.</li>
<li><code>parse(s)</code> - Parse a string to for a chain of lenses</li>
<li><code>andThen(b)</code> - Helper method to enable chaining of lens objects.</li>
<li><code>compose(b)</code> - Enabling of composing lenses together.</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-313">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-313">&#182;</a>
              </div>
              <h3>identityLens</h3>
<p> Identity partial lens that returns the original target.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    PartialLens.identityLens = <span class="keyword">function</span>() {
        <span class="keyword">return</span> PartialLens(<span class="keyword">function</span>(target) {
            <span class="keyword">return</span> Option.Some(Lens.identity().run(target));
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-314">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-314">&#182;</a>
              </div>
              <h3>objectLens</h3>
<p> PartialLens access for a object at a given property if the property
 exists otherwise returns none.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    PartialLens.objectLens = <span class="keyword">function</span>(property) {
        <span class="keyword">var</span> lens = Lens.objectLens(property);
        <span class="keyword">return</span> PartialLens(<span class="keyword">function</span>(target) {
            <span class="keyword">return</span> property <span class="keyword">in</span> target ?
                      Option.Some(lens.run(target)) :
                      Option.None;
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-315">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-315">&#182;</a>
              </div>
              <h3>arrayLens</h3>
<p> PartialLens access for an array at a given index if the index exists
 otherwise returns none.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    PartialLens.arrayLens = <span class="keyword">function</span>(index) {
        <span class="keyword">var</span> lens = Lens.arrayLens(index);
        <span class="keyword">return</span> PartialLens(<span class="keyword">function</span>(target) {
            <span class="keyword">return</span> index &gt;= <span class="number">0</span> &amp;&amp; index &lt; target.length ?
                      Option.Some(lens.run(target)) :
                      Option.None;
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-316">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-316">&#182;</a>
              </div>
              <h3>andThen</h3>
<p> Helper method to enable chaining of lens objects.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    PartialLens.prototype.andThen = <span class="keyword">function</span>(b) {
        <span class="keyword">return</span> b.compose(<span class="keyword">this</span>);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-317">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-317">&#182;</a>
              </div>
              <h3>compose</h3>
<p> Enabling of composing lenses together.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    PartialLens.prototype.compose = <span class="keyword">function</span>(b) {
        <span class="keyword">var</span> a = <span class="keyword">this</span>;
        <span class="keyword">return</span> PartialLens(<span class="keyword">function</span>(target) {
            <span class="keyword">return</span> b.run(target).chain(<span class="keyword">function</span>(c) {
                <span class="keyword">return</span> a.run(c.get()).map(<span class="keyword">function</span>(d) {
                    <span class="keyword">return</span> Store(
                        compose(c.set, d.set),
                        d.get
                    );
                });
            });
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-318">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-318">&#182;</a>
              </div>
              <h2>isLens(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>Lens</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isLens = isInstanceOf(Lens);</pre></div></div>
            
        </li>
        
        
        <li id="section-319">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-319">&#182;</a>
              </div>
              <h2>isPartialLens(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>PartialLens</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isPartialLens = isInstanceOf(PartialLens);</pre></div></div>
            
        </li>
        
        
        <li id="section-320">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-320">&#182;</a>
              </div>
              <h3>Fantasy Overload</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fo.unsafeSetValueOf(Lens.prototype);</pre></div></div>
            
        </li>
        
        
        <li id="section-321">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-321">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'Lens'</span>, Lens)
        .property(<span class="string">'isLens'</span>, isLens)
        .property(<span class="string">'PartialLens'</span>, PartialLens)
        .property(<span class="string">'isPartialLens'</span>, isPartialLens);</pre></div></div>
            
        </li>
        
        
        <li id="section-322">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-322">&#182;</a>
              </div>
              <h2>Store(set, get)</h2>
<ul>
<li><code>extract()</code> - Extracting value returning new</li>
<li><code>extend(f)</code> - Monadic flatMap/bind</li>
<li><code>map(f)</code> - Functor map</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> Store = tagged(<span class="string">'Store'</span>, [<span class="string">'set'</span>, <span class="string">'get'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-323">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-323">&#182;</a>
              </div>
              <h3>extract()</h3>
<p> Extract the value and sets a new value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Store.prototype.extract = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.set(<span class="keyword">this</span>.get());
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-324">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-324">&#182;</a>
              </div>
              <h3>extend(f)</h3>
<p> Extend the store value with the result from f, chaining stores together.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Store.prototype.extend = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> Store(
            <span class="keyword">function</span>(k) {
                env.set(f(Store(
                    env.set,
                    constant(k)
                )));
                <span class="keyword">return</span> env.get();
            },
            <span class="keyword">function</span>() {
                <span class="keyword">return</span> env.get();
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-325">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-325">&#182;</a>
              </div>
              <h3>map(f)</h3>
<p> Returns a new state that evaluates <code>f</code> on a value and passes it through.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Store.prototype.map = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> self = <span class="keyword">this</span>;
        <span class="keyword">return</span> <span class="keyword">this</span>.extend(<span class="keyword">function</span>(c) {
            <span class="keyword">return</span> f(c.extract());
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-326">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-326">&#182;</a>
              </div>
              <h2>isStore(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>Store</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isStore = isInstanceOf(Store);</pre></div></div>
            
        </li>
        
        
        <li id="section-327">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-327">&#182;</a>
              </div>
              <h2>storeOf(type)</h2>
<p> Sentinel value for when an store of a particular type is needed:</p>
<pre><code>  storeOf(Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">storeOf</span><span class="params">(type)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, storeOf);
        self.type = type;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-328">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-328">&#182;</a>
              </div>
              <h2>isStoreOf(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>storeOf</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isStoreOf = isInstanceOf(storeOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-329">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-329">&#182;</a>
              </div>
              <h3>Fantasy Overload</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fo.unsafeSetValueOf(Store.prototype);</pre></div></div>
            
        </li>
        
        
        <li id="section-330">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-330">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'Store'</span>, Store)
        .property(<span class="string">'storeOf'</span>, storeOf)
        .property(<span class="string">'isStore'</span>, isStore)
        .property(<span class="string">'isStoreOf'</span>, isStoreOf)
        .method(<span class="string">'extract'</span>, isStore, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a.extract();
        })
        .method(<span class="string">'map'</span>, isStore, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.map(b);
        })
        .method(<span class="string">'arb'</span>, isStoreOf, <span class="keyword">function</span>(a, b) {
            <span class="keyword">var</span> value = <span class="keyword">this</span>.arb(a.type, b - <span class="number">1</span>);
            <span class="keyword">return</span> Store(
                identity,
                constant(value)
            );
        })
        .method(<span class="string">'shrink'</span>, isStore, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> [];
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-331">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-331">&#182;</a>
              </div>
              <h2>Reader(run)</h2>
<p> Reader represents a computation, which can read values, passes values from
 function to functions.</p>
<ul>
<li><code>ap(b, concat)</code> - Applicative ap(ply)</li>
<li><code>chain(f)</code> - Monadic flatMap/bind</li>
<li><code>map(f)</code> - Functor map</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> Reader = tagged(<span class="string">'Reader'</span>, [<span class="string">'run'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-332">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-332">&#182;</a>
              </div>
              <h2>ask(x)</h2>
<p> Constructs a <code>Reader</code> from the current value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Reader.ask = Reader(<span class="keyword">function</span>(e) {
        <span class="keyword">return</span> e;
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-333">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-333">&#182;</a>
              </div>
              <h2>of(x)</h2>
<p> Constructor <code>of</code> Monad creating a <code>Reader</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Reader.of = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> Reader(<span class="keyword">function</span>(e) {
            <span class="keyword">return</span> a;
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-334">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-334">&#182;</a>
              </div>
              <h2>empty()</h2>
<p> Constructor <code>empty</code> Monad creating a <code>Reader</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Reader.empty = <span class="keyword">function</span>() {
        <span class="keyword">return</span> Reader(nothing);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-335">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-335">&#182;</a>
              </div>
              <h3>ap(b)</h3>
<p> Apply a function in the environment of the value of this reader
 Applicative ap(ply)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Reader.prototype.ap = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(<span class="keyword">function</span>(f) {
            <span class="keyword">return</span> squishy.map(a, f);
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-336">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-336">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Bind through the value of the reader
 Monadic flatMap/bind</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Reader.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> Reader(<span class="keyword">function</span>(e) {
            <span class="keyword">return</span> f(env.run(e)).run(e);
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-337">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-337">&#182;</a>
              </div>
              <h3>map(f)</h3>
<p> Map on the value of this reader.
 Functor map</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Reader.prototype.map = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(<span class="keyword">function</span>(a) {
            <span class="keyword">return</span> Reader.of(f(a));
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-338">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-338">&#182;</a>
              </div>
              <h2>isReader(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>Reader</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isReader = isInstanceOf(Reader);</pre></div></div>
            
        </li>
        
        
        <li id="section-339">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-339">&#182;</a>
              </div>
              <h2>readerOf(type)</h2>
<p> Sentinel value for when an reader of a particular type is needed:</p>
<pre><code>  readerOf(Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">readerOf</span><span class="params">(type)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, readerOf);
        self.type = type;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-340">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-340">&#182;</a>
              </div>
              <h2>isReaderOf(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>readerOf</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isReaderOf = isInstanceOf(readerOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-341">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-341">&#182;</a>
              </div>
              <h3>Fantasy Overload</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fo.unsafeSetValueOf(Reader.prototype);</pre></div></div>
            
        </li>
        
        
        <li id="section-342">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-342">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'Reader'</span>, Reader)
        .property(<span class="string">'readerOf'</span>, readerOf)
        .property(<span class="string">'isReader'</span>, isReader)
        .property(<span class="string">'isReaderOf'</span>, isReaderOf)
        .method(<span class="string">'of'</span>, strictEquals(Reader), <span class="keyword">function</span>(x) {
            <span class="keyword">return</span> Reader.of(x);
        })
        .method(<span class="string">'empty'</span>, strictEquals(Reader), <span class="keyword">function</span>() {
            <span class="keyword">return</span> Reader.empty();
        })
        .method(<span class="string">'chain'</span>, isReader, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.chain(b);
        })
        .method(<span class="string">'map'</span>, isReader, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.map(b);
        })
        .method(<span class="string">'arb'</span>, isReaderOf, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> Reader.of(<span class="keyword">this</span>.arb(a.type, b - <span class="number">1</span>));
        })
        .method(<span class="string">'shrink'</span>, isReader, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> [];
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-343">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-343">&#182;</a>
              </div>
              <h2>Writer(run)</h2>
<p> Writer represents a computation, which can write values, passes values from
 function to functions.</p>
<ul>
<li><code>ap(b, concat)</code> - Applicative ap(ply)</li>
<li><code>chain(f)</code> - Monadic flatMap/bind</li>
<li><code>map(f)</code> - Functor map</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> Writer = tagged(<span class="string">'Writer'</span>, [<span class="string">'run'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-344">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-344">&#182;</a>
              </div>
              <h2>of(x)</h2>
<p> Constructor <code>of</code> Monad creating a <code>Writer</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Writer.of = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> Writer(<span class="keyword">function</span>() {
            <span class="keyword">return</span> Tuple2(a, <span class="literal">null</span>);
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-345">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-345">&#182;</a>
              </div>
              <h2>empty()</h2>
<p> Constructor <code>empty</code> Monad creating a <code>Writer</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Writer.empty = <span class="keyword">function</span>() {
        <span class="keyword">return</span> Writer(nothing);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-346">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-346">&#182;</a>
              </div>
              <h2>put()</h2>
<p> Constructor <code>put</code> to return the value of <code>t</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Writer.put = <span class="keyword">function</span>(t) {
        <span class="keyword">return</span> Writer(<span class="keyword">function</span>() {
            <span class="keyword">return</span> t;
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-347">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-347">&#182;</a>
              </div>
              <h3>ap(b)</h3>
<p> Apply a function in the environment of the value of this writer
 Applicative ap(ply)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Writer.prototype.ap = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(<span class="keyword">function</span>(tup) {
            <span class="keyword">return</span> squishy.map(a, <span class="keyword">function</span>(val) {
                <span class="keyword">return</span> Tuple2(tup._1(val._1), val._2);
            });
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-348">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-348">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Bind through the value of the writer
 Monadic flatMap/bind</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Writer.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> Writer(<span class="keyword">function</span>(e) {
            <span class="keyword">var</span> a = env.run(e),
                b = f(a).run(e);
    
            <span class="keyword">return</span> Tuple2(b._1, squishy.concat(a._2, b._2));
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-349">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-349">&#182;</a>
              </div>
              <h3>map(f)</h3>
<p> Map on the value of this writer.
 Functor map</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Writer.prototype.map = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(<span class="keyword">function</span>(a) {
            <span class="keyword">return</span> Writer.put(f(a));
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-350">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-350">&#182;</a>
              </div>
              <h2>isWriter(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>Writer</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isWriter = isInstanceOf(Writer);</pre></div></div>
            
        </li>
        
        
        <li id="section-351">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-351">&#182;</a>
              </div>
              <h2>writerOf(type)</h2>
<p> Sentinel value for when an writer of a particular type is needed:</p>
<pre><code>  writerOf(Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">writerOf</span><span class="params">(type)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, writerOf);
        self.type = type;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-352">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-352">&#182;</a>
              </div>
              <h2>isWriterOf(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>writerOf</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isWriterOf = isInstanceOf(writerOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-353">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-353">&#182;</a>
              </div>
              <h3>Fantasy Overload</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fo.unsafeSetValueOf(Writer.prototype);</pre></div></div>
            
        </li>
        
        
        <li id="section-354">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-354">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'Writer'</span>, Writer)
        .property(<span class="string">'writerOf'</span>, Writer)
        .property(<span class="string">'isWriter'</span>, isWriter)
        .property(<span class="string">'isWriterOf'</span>, isWriterOf)
        .method(<span class="string">'of'</span>, strictEquals(Writer), <span class="keyword">function</span>(x) {
            <span class="keyword">return</span> State.of(x);
        })
        .method(<span class="string">'ap'</span>, isWriter, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.ap(b);
        })
        .method(<span class="string">'chain'</span>, isWriter, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.chain(b);
        })
        .method(<span class="string">'map'</span>, isWriter, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.map(b);
        })
        .method(<span class="string">'arb'</span>, isWriterOf, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> Writer.of(<span class="keyword">this</span>.arb(a.type, b - <span class="number">1</span>));
        })
        .method(<span class="string">'shrink'</span>, isWriter, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> [];
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-355">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-355">&#182;</a>
              </div>
              <h2>State(run)</h2>
<p> Monadic state.</p>
<ul>
<li><code>ap(b, concat)</code> - Applicative ap(ply)</li>
<li><code>chain(f)</code> - Monadic flatMap/bind</li>
<li><code>map(f)</code> - Functor map</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> State = tagged(<span class="string">'State'</span>, [<span class="string">'run'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-356">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-356">&#182;</a>
              </div>
              <h2>of(x)</h2>
<p> Constructor <code>of</code> Monad creating a <code>State</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    State.of = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> State(<span class="keyword">function</span>(b) {
            <span class="keyword">return</span> Tuple2(a, b);
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-357">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-357">&#182;</a>
              </div>
              <h2>get()</h2>
<p> Constructor <code>get</code> to retrieve the state value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    State.get = State(<span class="keyword">function</span>(s) {
        <span class="keyword">return</span> Tuple2(s, s);
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-358">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-358">&#182;</a>
              </div>
              <h2>modify(f)</h2>
<p> Constructor <code>modify</code> to alter the state value using the function.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    State.modify = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> State(<span class="keyword">function</span>(s) {
            <span class="keyword">return</span> Tuple2(<span class="literal">null</span>, f(s));
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-359">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-359">&#182;</a>
              </div>
              <h2>put(s)</h2>
<p> Constructor <code>put</code> to return the value of <code>s</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    State.put = <span class="keyword">function</span>(s) {
        <span class="keyword">return</span> State.modify(<span class="keyword">function</span>(a) {
            <span class="keyword">return</span> s;
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-360">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-360">&#182;</a>
              </div>
              <h3>ap(b)</h3>
<p> Apply a function in the environment of the value of this state
 Applicative ap(ply)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    State.prototype.ap = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(<span class="keyword">function</span>(f) {
            <span class="keyword">return</span> squishy.map(a, f);
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-361">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-361">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Bind through the value of the state
 Monadic flatMap/bind</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    State.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>;
        <span class="keyword">return</span> State(<span class="keyword">function</span>(s) {
            <span class="keyword">var</span> result = env.run(s);
            <span class="keyword">return</span> f(result._1).run(result._2);
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-362">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-362">&#182;</a>
              </div>
              <h3>evalState(s)</h3>
<p> Evaluate the state with <code>s</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    State.prototype.evalState = <span class="keyword">function</span>(s) {
        <span class="keyword">return</span> <span class="keyword">this</span>.run(s)._1;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-363">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-363">&#182;</a>
              </div>
              <h3>execState(s)</h3>
<p> Execute the state with <code>s</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    State.prototype.execState = <span class="keyword">function</span>(s) {
        <span class="keyword">return</span> <span class="keyword">this</span>.run(s)._2;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-364">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-364">&#182;</a>
              </div>
              <h3>map(f)</h3>
<p> Map on the value of this state.
 Functor map</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    State.prototype.map = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.chain(<span class="keyword">function</span>(a) {
            <span class="keyword">return</span> State.of(f(a));
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-365">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-365">&#182;</a>
              </div>
              <p>Transformer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    State.StateT = <span class="keyword">function</span>(M) {</pre></div></div>
            
        </li>
        
        
        <li id="section-366">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-366">&#182;</a>
              </div>
              <p> Monadic state transformer.</p>
<ul>
<li><code>ap(b, concat)</code> - Applicative ap(ply)</li>
<li><code>chain(f)</code> - Monadic flatMap/bind</li>
<li><code>map(f)</code> - Functor map</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">var</span> StateT = tagged(<span class="string">'StateT'</span>, [<span class="string">'run'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-367">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-367">&#182;</a>
              </div>
              <h2>lift(m)</h2>
<p> Constructor <code>lift</code> Monad creating a <code>StateT</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        StateT.lift = <span class="keyword">function</span>(m) {
            <span class="keyword">return</span> StateT(<span class="keyword">function</span>(b) {
                <span class="keyword">return</span> m;
            });
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-368">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-368">&#182;</a>
              </div>
              <h2>of(x)</h2>
<p> Constructor <code>of</code> Monad creating a <code>StateT</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        StateT.of = <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> StateT(<span class="keyword">function</span>(b) {
                <span class="keyword">return</span> M.of(Tuple2(a, b));
            });
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-369">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-369">&#182;</a>
              </div>
              <h2>get()</h2>
<p> Constructor <code>get</code> to retrieve the stateT value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        StateT.get = StateT(<span class="keyword">function</span>(s) {
            <span class="keyword">return</span> M.of(Tuple2(s, s));
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-370">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-370">&#182;</a>
              </div>
              <h2>modify(f)</h2>
<p> Constructor <code>modify</code> to alter the stateT value using the function.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        StateT.modify = <span class="keyword">function</span>(f) {
            <span class="keyword">return</span> StateT(<span class="keyword">function</span>(s) {
                <span class="keyword">return</span> M.of(Tuple2(<span class="literal">null</span>, f(s)));
            });
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-371">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-371">&#182;</a>
              </div>
              <h2>put(s)</h2>
<p> Constructor <code>put</code> to return the value of s.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        StateT.put = <span class="keyword">function</span>(s) {
            <span class="keyword">return</span> StateT.modify(<span class="keyword">function</span>(a) {
                <span class="keyword">return</span> s;
            });
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-372">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-372">&#182;</a>
              </div>
              <h3>ap(b)</h3>
<p> Apply a function in the environment of the value of this stateT
 Applicative ap(ply)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        StateT.prototype.ap = <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> <span class="keyword">this</span>.chain(<span class="keyword">function</span>(f) {
                <span class="keyword">return</span> squishy.map(a, f);
            });
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-373">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-373">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Bind through the value of the stateT
 Monadic flatMap/bind</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        StateT.prototype.chain = <span class="keyword">function</span>(f) {
            <span class="keyword">var</span> state = <span class="keyword">this</span>;
            <span class="keyword">return</span> StateT(<span class="keyword">function</span>(s) {
                <span class="keyword">var</span> result = state.run(s);
                <span class="keyword">return</span> result.chain(<span class="keyword">function</span>(t) {
                    <span class="keyword">return</span> f(t._1).run(t._2);
                });
            });
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-374">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-374">&#182;</a>
              </div>
              <h3>evalState(s)</h3>
<p> Evaluate the stateT with <code>s</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        StateT.prototype.evalState = <span class="keyword">function</span>(s) {
            <span class="keyword">return</span> <span class="keyword">this</span>.run(s).chain(<span class="keyword">function</span>(t) {
                <span class="keyword">return</span> t._1;
            });
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-375">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-375">&#182;</a>
              </div>
              <h3>execState(s)</h3>
<p> Execute the stateT with <code>s</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        StateT.prototype.execState = <span class="keyword">function</span>(s) {
            <span class="keyword">return</span> <span class="keyword">this</span>.run(s).chain(<span class="keyword">function</span>(t) {
                <span class="keyword">return</span> t._2;
            });
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-376">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-376">&#182;</a>
              </div>
              <h3>map(f)</h3>
<p> Map on the value of this stateT.
 Functor map</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        StateT.prototype.map = <span class="keyword">function</span>(f) {
            <span class="keyword">return</span> <span class="keyword">this</span>.chain(<span class="keyword">function</span>(a) {
                <span class="keyword">return</span> StateT.of(f(a));
            });
        };
    
        <span class="keyword">return</span> StateT;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-377">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-377">&#182;</a>
              </div>
              <h2>isState(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is <code>State</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isState = isInstanceOf(State);</pre></div></div>
            
        </li>
        
        
        <li id="section-378">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-378">&#182;</a>
              </div>
              <h3>Fantasy Overload</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fo.unsafeSetValueOf(State.prototype);</pre></div></div>
            
        </li>
        
        
        <li id="section-379">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-379">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'State'</span>, State)
        .property(<span class="string">'isState'</span>, isState)
        .method(<span class="string">'of'</span>, strictEquals(State), <span class="keyword">function</span>(x) {
            <span class="keyword">return</span> State.of(x);
        })
        .method(<span class="string">'ap'</span>, isState, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.ap(b);
        })
        .method(<span class="string">'chain'</span>, isState, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.chain(b);
        })
        .method(<span class="string">'map'</span>, isState, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.map(b);
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-380">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-380">&#182;</a>
              </div>
              <h1>List</h1>
<pre><code> List a = Cons a + Nil</code></pre>
<p> The list type data type constructs objects which points to values. The <code>Cons</code>
 constructor represents a value, the left is the head (the first element)
 and the right represents the tail (the second element). The <code>Nil</code>
 constructor is defined as an empty list.</p>
<p> The following example creates a list of values 1 and 2, where the Nil terminates
 the list:</p>
<pre><code> Cons(1, Cons(2, Nil));</code></pre>
<p> The following can also represent tree like structures (Binary Trees):</p>
<pre><code> Cons(Cons(1, Cons(2, Nil)), Cons(3, Cons(4, Nil)));

        *
       / \
      *   *
     / \ / \
    1  2 3  4</code></pre>
<ul>
<li><code>ap(a, b)</code> - Applicative ap(ply)</li>
<li><code>chain(f)</code> - monadic flatMap</li>
<li><code>concat(a)</code> - semigroup concat</li>
<li><code>count(a, f)</code> - Count the number of elements in the list which satisfy a predicate.</li>
<li><code>drop(a, n)</code> - Returns the list without its n first elements. If this list has less than n elements, the empty list is returned.</li>
<li><code>dropRight(a, n)</code> - Returns the list without its rightmost <code>n</code> elements.</li>
<li><code>dropWhile(a, f)</code> - Returns the longest suffix of this list whose first element does not satisfy the predicate.</li>
<li><code>extract()</code> -  extract the value from option</li>
<li><code>equal(a)</code> -  <code>true</code> if <code>a</code> is equal to <code>this</code></li>
<li><code>fold(a, b)</code> - applies <code>a</code> to value if <code>Cons</code> or defaults to <code>b</code></li>
<li><code>map(f)</code> - functor map</li>
<li><code>append(a)</code> - append</li>
<li><code>appendAll(a)</code> - append values</li>
<li><code>prepend(a)</code> - prepend value</li>
<li><code>prependAll(a)</code> - prepend values</li>
<li><code>reverse()</code> - reverse</li>
<li><code>exists()</code> - test by predicate</li>
<li><code>filter()</code> - filter by predicate</li>
<li><code>partition()</code> - partition by predicate</li>
<li><code>reduce(a, f)</code> - Combines the elements of this list together using the binary operator op, from Left to Right</li>
<li><code>reduceRight(a, f)</code> - Combines the elements of this list together using the binary operator op, from Right to Left</li>
<li><code>size()</code> - size of the list</li>
<li><code>take(n)</code> - Returns the n first elements of this list.</li>
<li><code>takeRight(n)</code> - Returns the rightmost n elements from this list.</li>
<li><code>takeWhile(f)</code> - Returns the longest prefix of this list whose elements satisfy the predicate.</li>
<li><code>zip(a, b)</code> - Returns a list formed from this list and the specified list that by associating each element of the former with the element at the same position in the latter.</li>
<li><code>zipWithIndex(a)</code> -  Returns a list form from this list and a index of the value that is associated with each element index position.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> List = taggedSum(<span class="string">'List'</span>, {
        Cons: [<span class="string">'head'</span>, <span class="string">'tail'</span>],
        Nil: []
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-381">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-381">&#182;</a>
              </div>
              <h3>range(a, b)</h3>
<p> Create a list from a range of values.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.range = curry(<span class="keyword">function</span>(a, b) {
        <span class="keyword">var</span> total = b - a;
        <span class="keyword">var</span> rec = <span class="keyword">function</span>(x, y) {
            <span class="keyword">if</span> (y - a &gt;= total) <span class="keyword">return</span> done(x);
            <span class="keyword">return</span> cont(<span class="keyword">function</span>() {
                <span class="keyword">return</span> rec(List.Cons(y, x), ++y);
            });
        };
        <span class="keyword">return</span> trampoline(rec(List.Nil, a));
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-382">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-382">&#182;</a>
              </div>
              <h3>fromArray()</h3>
<p> Returns a list from an array.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.fromArray = <span class="keyword">function</span>(array) {
        <span class="keyword">var</span> total = array.length,
            accum = List.Nil,
            i;
    
        <span class="keyword">for</span>(i = total - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) {
            accum = accum.prepend(array[i]);
        }
    
        <span class="keyword">return</span> accum;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-383">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-383">&#182;</a>
              </div>
              <h3>ap(b, [concat])</h3>
<p> Apply a function in the applicative of each function
 Applicative ap(ply)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.ap = <span class="keyword">function</span>(b) {
        <span class="keyword">var</span> accum = List.Nil,
            a = <span class="keyword">this</span>,
            x = b;
    
        <span class="keyword">while</span>(a.isNonEmpty) {
            b = x;
            <span class="keyword">while</span>(b.isNonEmpty) {
                accum = accum.prepend(a.head(b.head));
                b = b.tail;
            }
            a = a.tail;
        }
    
        <span class="keyword">return</span> accum.reverse();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-384">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-384">&#182;</a>
              </div>
              <h3>append(a)</h3>
<p> Append a value to the current list returning a new list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.append = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> <span class="keyword">this</span>.appendAll(List.Cons(a, List.Nil));
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-385">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-385">&#182;</a>
              </div>
              <h3>appendAll(a)</h3>
<p> Append a list of values to the current list returning a new list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.appendAll = <span class="keyword">function</span>(a) {
        <span class="keyword">var</span> accum = a;
        <span class="keyword">var</span> p = <span class="keyword">this</span>.reverse();
    
        <span class="keyword">while</span>(p.isNonEmpty) {
            accum = List.Cons(p.head, accum);
            p = p.tail;
        }
    
        <span class="keyword">return</span> accum;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-386">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-386">&#182;</a>
              </div>
              <h3>chain(f)</h3>
<p> Applies the given function f to each element of this list, then
 concatenates the results.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.chain = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.fold(
            List.Nil,
            <span class="keyword">function</span>(a, b) {
                <span class="keyword">return</span> a.appendAll(f(b));
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-387">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-387">&#182;</a>
              </div>
              <h3>concat(s)</h3>
<p> Appends two list objects.
 semigroup concat</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.concat = <span class="keyword">function</span>(s) {
        <span class="keyword">return</span> <span class="keyword">this</span>.appendAll(s);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-388">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-388">&#182;</a>
              </div>
              <h3>count(f)</h3>
<p> Count the number of elements in the list which satisfy a predicate.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.count = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> rec = <span class="keyword">function</span>(a, b) {
            <span class="keyword">if</span> (a.isEmpty) <span class="keyword">return</span> done(b);
    
            <span class="keyword">return</span> cont(<span class="keyword">function</span>() {
                <span class="keyword">return</span> rec(a.tail, f(a.head) ? inc(b) : b);
            });
        };
        <span class="keyword">return</span> trampoline(rec(<span class="keyword">this</span>, <span class="number">0</span>));
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-389">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-389">&#182;</a>
              </div>
              <h3>drop(n)</h3>
<p> Returns the list without its n first elements. If this list has less than n elements, the empty list is returned.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.drop = <span class="keyword">function</span>(n) {
        <span class="keyword">var</span> rec = <span class="keyword">function</span>(a, b) {
            <span class="keyword">if</span> (a.isEmpty || b &lt; <span class="number">1</span>) <span class="keyword">return</span> done(a);
    
            <span class="keyword">return</span> cont(<span class="keyword">function</span>() {
                <span class="keyword">return</span> rec(a.tail, --b);
            });
        };
        <span class="keyword">return</span> trampoline(rec(<span class="keyword">this</span>, n));
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-390">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-390">&#182;</a>
              </div>
              <h3>dropRight(n)</h3>
<p> Returns the list without its rightmost <code>n</code> elements.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.dropRight = <span class="keyword">function</span>(n) {
        <span class="keyword">if</span> (n &lt; <span class="number">1</span>) <span class="keyword">return</span> List.Nil;
    
        <span class="keyword">var</span> rec = <span class="keyword">function</span>(a, b, c) {
            <span class="keyword">if</span> (a.isEmpty || c &lt; <span class="number">1</span>) <span class="keyword">return</span> done(b);
    
            <span class="keyword">return</span> cont(<span class="keyword">function</span>() {
                <span class="keyword">return</span> rec(a.tail, b.prepend(a.head), --c);
            });
        };
        <span class="keyword">return</span> trampoline(rec(<span class="keyword">this</span>, List.Nil, <span class="keyword">this</span>.size() - n)).reverse();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-391">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-391">&#182;</a>
              </div>
              <h3>dropWhile(f)</h3>
<p> Returns the longest suffix of this array whose first element
 does not satisfy the predicate.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.dropWhile = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>,
            rec = <span class="keyword">function</span>(a, b) {
                <span class="keyword">if</span> (a.isEmpty) <span class="keyword">return</span> done(<span class="number">0</span>);
                <span class="keyword">else</span> <span class="keyword">if</span>(!f(a.head)) <span class="keyword">return</span> done(b);
    
                <span class="keyword">return</span> cont(<span class="keyword">function</span>() {
                    <span class="keyword">return</span> rec(a.tail, ++b);
                });
            },
            index = trampoline(rec(<span class="keyword">this</span>, <span class="number">0</span>));
    
        <span class="keyword">return</span> <span class="keyword">this</span>.drop(index);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-392">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-392">&#182;</a>
              </div>
              <h3>exists(f)</h3>
<p> Tests the existence in this list of an element that satisfies
 the predicate.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.exists = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> p = <span class="keyword">this</span>;
    
        <span class="keyword">while</span>(p.isNonEmpty) {
            <span class="keyword">if</span>(f(p.head)) {
                <span class="keyword">return</span> <span class="literal">true</span>;
            }
            p = p.tail;
        }
        <span class="keyword">return</span> <span class="literal">false</span>;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-393">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-393">&#182;</a>
              </div>
              <h3>extract()</h3>
<p> Extract the value from the list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.extract = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.match({
            Cons: <span class="keyword">function</span>(a) {
                <span class="keyword">return</span> a;
            },
            Nil: constant(<span class="literal">null</span>)
        });
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-394">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-394">&#182;</a>
              </div>
              <h3>equal(b)</h3>
<p> Compare two list values for equality</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.equal = <span class="keyword">function</span>(b) {
        <span class="keyword">var</span> accum = <span class="literal">true</span>,
            a = <span class="keyword">this</span>;
        <span class="keyword">while</span>(a.isNonEmpty &amp;&amp; b.isNonEmpty) {
            accum = accum &amp;&amp; squishy.equal(a.head, b.head);
    
            <span class="keyword">if</span> (!accum) {
                <span class="keyword">break</span>;
            }
    
            a = a.tail;
            b = b.tail;
        }
        <span class="comment">/* Check for length of lists as well */</span>
        <span class="keyword">return</span> accum ? a.isEmpty &amp;&amp; b.isEmpty : <span class="literal">false</span>;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-395">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-395">&#182;</a>
              </div>
              <h3>filter(f)</h3>
<p> Returns all the elements of this list that satisfy the predicate p.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.filter = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> rec = <span class="keyword">function</span>(a, b) {
            <span class="keyword">if</span> (a.isEmpty) <span class="keyword">return</span> done(b);
    
            <span class="keyword">return</span> cont(<span class="keyword">function</span>() {
                <span class="keyword">var</span> c = curry(rec)(a.tail);
                <span class="keyword">if</span> (f(a.head)) {
                    <span class="keyword">return</span> c(List.Cons(a.head, b));
                } <span class="keyword">else</span> {
                    <span class="keyword">return</span> c(b);
                }
            });
        };
        <span class="keyword">return</span> trampoline(rec(<span class="keyword">this</span>, List.Nil)).reverse();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-396">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-396">&#182;</a>
              </div>
              <h3>fold(v, f)</h3>
<p> Combines the elements of this list together using the binary function f,
 from Left to Right, and starting with the value v.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.fold = <span class="keyword">function</span>(v, f) {
        <span class="keyword">var</span> rec = <span class="keyword">function</span>(a, b) {
            <span class="keyword">if</span> (a.isEmpty) <span class="keyword">return</span> done(b);
    
            <span class="keyword">return</span> cont(<span class="keyword">function</span>() {
                <span class="keyword">return</span> rec(a.tail, f(b, a.head));
            });
        };
        <span class="keyword">return</span> trampoline(rec(<span class="keyword">this</span>, v));
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-397">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-397">&#182;</a>
              </div>
              <h3>get(index)</h3>
<p> Get the given item at the correct index</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.get = <span class="keyword">function</span>(index) {
        <span class="keyword">var</span> accum = <span class="literal">null</span>,
            i = -<span class="number">1</span>,
            p = <span class="keyword">this</span>;
    
        <span class="keyword">while</span>(p.isNonEmpty &amp;&amp; i &lt; index) {
            accum = p.head;
            p = p.tail;
            i++;
        }
        <span class="keyword">return</span> accum;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-398">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-398">&#182;</a>
              </div>
              <h3>map(f)</h3>
<p> Returns the list resulting from applying the given function f to each
 element of this list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.map = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.fold(
            List.Nil,
            <span class="keyword">function</span>(a, b) {
                <span class="keyword">return</span> List.Cons(f(b), a);
            }
        );
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-399">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-399">&#182;</a>
              </div>
              <h3>partition(f)</h3>
<p> Partition the list in two sub-lists according to a predicate.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.partition = <span class="keyword">function</span>(f) {
        <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty) <span class="keyword">return</span> Tuple2(<span class="keyword">this</span>, <span class="keyword">this</span>);
    
        <span class="keyword">var</span> rec = <span class="keyword">function</span>(a, l, r) {
            <span class="keyword">if</span> (a.isEmpty) <span class="keyword">return</span> done(Tuple2(l.reverse(), r.reverse()));
    
            <span class="keyword">return</span> cont(<span class="keyword">function</span>() {
                <span class="keyword">var</span> h = a.head;
                <span class="keyword">var</span> cur = curry(List.Cons)(h);
                <span class="keyword">if</span> (f(h)) {
                    <span class="keyword">return</span> rec(a.tail, cur(l), r);
                } <span class="keyword">else</span> {
                    <span class="keyword">return</span> rec(a.tail, l, cur(r));
                }
            });
        };
        <span class="keyword">return</span> trampoline(rec(<span class="keyword">this</span>, List.Nil, List.Nil));
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-400">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-400">&#182;</a>
              </div>
              <h3>prepend(a)</h3>
<p> Prepend a value to the current list returning a new list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.prepend = <span class="keyword">function</span>(a) {
        <span class="keyword">return</span> List.Cons(a, <span class="keyword">this</span>);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-401">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-401">&#182;</a>
              </div>
              <h3>prependAll(a)</h3>
<p> Prepend a list of values to the current list returning a new list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.prependAll = <span class="keyword">function</span>(a) {
        <span class="keyword">var</span> rec = <span class="keyword">function</span>(a, b) {
            <span class="keyword">if</span> (a.isEmpty) <span class="keyword">return</span> done(b);
    
            <span class="keyword">return</span> cont(<span class="keyword">function</span>() {
                <span class="keyword">return</span> rec(a.tail, List.Cons(a.head, b));
            });
        };
        <span class="keyword">return</span> trampoline(rec(a, <span class="keyword">this</span>));
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-402">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-402">&#182;</a>
              </div>
              <h3>reduce(f)</h3>
<p> Combines the elements of this list together using the binary operator
 op, from Left to Right</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.reduce = <span class="keyword">function</span>(f) {
        <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty) <span class="keyword">return</span> <span class="literal">null</span>;
    
        <span class="keyword">var</span> rec = <span class="keyword">function</span>(a, b) {
            <span class="keyword">if</span> (a.isEmpty) <span class="keyword">return</span> done(b);
    
            <span class="keyword">return</span> cont(<span class="keyword">function</span>() {
                <span class="keyword">return</span> rec(a.tail, f(b, a.head));
            });
        };
        <span class="keyword">return</span> trampoline(rec(<span class="keyword">this</span>.tail, <span class="keyword">this</span>.head));
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-403">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-403">&#182;</a>
              </div>
              <h3>reduceRight(f)</h3>
<p> Combines the elements of this list together using the binary operator
 op, from Right to Left</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.reduceRight = <span class="keyword">function</span>(f) {
        <span class="keyword">return</span> <span class="keyword">this</span>.reverse().reduce(f);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-404">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-404">&#182;</a>
              </div>
              <h3>reverse()</h3>
<p> Reverse the list as a new list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.reverse = <span class="keyword">function</span>() {
        <span class="keyword">var</span> rec = <span class="keyword">function</span>(p, accum) {
            <span class="keyword">return</span> p.match({
                Cons: <span class="keyword">function</span>(a, b) {
                    <span class="keyword">return</span> cont(<span class="keyword">function</span>() {
                        <span class="keyword">return</span> rec(p.tail, List.Cons(a, accum));
                    });
                },
                Nil: <span class="keyword">function</span>() {
                    <span class="keyword">return</span> done(accum);
                }
            });
        };
        <span class="keyword">return</span> trampoline(rec(<span class="keyword">this</span>, List.Nil));
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-405">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-405">&#182;</a>
              </div>
              <h3>size()</h3>
<p> size of the list</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.size = <span class="keyword">function</span>() {
        <span class="keyword">var</span> rec = <span class="keyword">function</span>(a, b) {
            <span class="keyword">if</span> (a.isEmpty) <span class="keyword">return</span> done(b);
    
            <span class="keyword">return</span> cont(<span class="keyword">function</span>() {
                <span class="keyword">return</span> rec(a.tail, ++b);
            });
        };
        <span class="keyword">return</span> trampoline(rec(<span class="keyword">this</span>, <span class="number">0</span>));
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-406">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-406">&#182;</a>
              </div>
              <h3>take(n)</h3>
<p> Returns the n first elements of this list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.take = <span class="keyword">function</span>(n) {
        <span class="keyword">var</span> accum = List.Nil,
            i = <span class="number">0</span>,
            p = <span class="keyword">this</span>;
    
        <span class="keyword">while</span>(p.isNonEmpty &amp;&amp; i &lt; n) {
            accum = List.Cons(p.head, accum);
            p = p.tail;
            i++;
        }
        <span class="keyword">return</span> accum.reverse();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-407">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-407">&#182;</a>
              </div>
              <h3>takeRight(n)</h3>
<p> Returns the rightmost n elements from this list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.takeRight = <span class="keyword">function</span>(n) {
        <span class="keyword">if</span> (n &lt; <span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">this</span>;
    
        <span class="keyword">var</span> rec = <span class="keyword">function</span>(a, b, c) {
            <span class="keyword">if</span> (a.isEmpty || c &lt; <span class="number">1</span>) <span class="keyword">return</span> done(b);
    
            <span class="keyword">return</span> cont(<span class="keyword">function</span>() {
                <span class="keyword">return</span> rec(a.tail, b.prepend(a.head), --c);
            });
        };
        <span class="keyword">return</span> trampoline(rec(<span class="keyword">this</span>.reverse(), List.Nil, n));
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-408">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-408">&#182;</a>
              </div>
              <h3>takeWhile(f)</h3>
<p> Returns the longest prefix of this list whose elements satisfy
 the predicate.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.takeWhile = <span class="keyword">function</span>(f) {
        <span class="keyword">var</span> env = <span class="keyword">this</span>,
            rec = <span class="keyword">function</span>(a, b) {
                <span class="keyword">if</span> (a.isEmpty) <span class="keyword">return</span> done(<span class="number">0</span>);
                <span class="keyword">else</span> <span class="keyword">if</span>(!f(a.head)) <span class="keyword">return</span> done(b);
    
                <span class="keyword">return</span> cont(<span class="keyword">function</span>() {
                    <span class="keyword">return</span> rec(a.tail, ++b);
                });
            },
            index = trampoline(rec(<span class="keyword">this</span>, <span class="number">0</span>));
    
        <span class="keyword">return</span> <span class="keyword">this</span>.take(index);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-409">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-409">&#182;</a>
              </div>
              <h3>zip(b)</h3>
<p> Returns a list formed from this list and the specified list that
 by associating each element of the former with the element at the same
 position in the latter.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.zip = <span class="keyword">function</span>(b) {
        <span class="keyword">var</span> accum = List.Nil,
            x = <span class="keyword">this</span>,
            y = b;
    
        <span class="keyword">while</span>(x.isNonEmpty &amp;&amp; y.isNonEmpty) {
            accum = List.Cons(Tuple2(x.head, y.head), accum);
            x = x.tail;
            y = y.tail;
        }
        <span class="keyword">return</span> accum.reverse();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-410">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-410">&#182;</a>
              </div>
              <h3>zipWithIndex(b)</h3>
<p> Returns a list form from this list and a index of the value that
 is associated with each element index position.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.zipWithIndex = <span class="keyword">function</span>(b) {
        <span class="keyword">var</span> accum = List.Nil,
            index = <span class="number">0</span>,
            p = <span class="keyword">this</span>;
    
        <span class="keyword">while</span>(p.isNonEmpty) {
            accum = List.Cons(Tuple2(p.head, index++), accum);
            p = p.tail;
        }
        <span class="keyword">return</span> accum.reverse();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-411">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-411">&#182;</a>
              </div>
              <h3>toArray()</h3>
<p> Returns a list as a array.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.prototype.toArray = <span class="keyword">function</span>() {
        <span class="keyword">var</span> accum = [],
            p = <span class="keyword">this</span>;
        <span class="keyword">while</span>(p.isNonEmpty) {
            accum.push(p.head);
            p = p.tail;
        }
        <span class="keyword">return</span> accum;
    };
    
    List.prototype.toString = <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="string">'List('</span> + <span class="keyword">this</span>.toArray().join(<span class="string">', '</span>) + <span class="string">')'</span>;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-412">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-412">&#182;</a>
              </div>
              <h2>Cons(a, b)</h2>
<p> Constructor to represent the existence of a value in a list, <code>a</code>
 and a reference to another <code>b</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.Cons.prototype.isEmpty = <span class="literal">false</span>;
    List.Cons.prototype.isNonEmpty = <span class="literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-413">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-413">&#182;</a>
              </div>
              <h2>Nil</h2>
<p> Represents an empty list (absence of a list).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List.Nil.isEmpty = <span class="literal">true</span>;
    List.Nil.isNonEmpty = <span class="literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-414">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-414">&#182;</a>
              </div>
              <h2>isList(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is a <code>Cons</code> or <code>Nil</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isList = isInstanceOf(List);</pre></div></div>
            
        </li>
        
        
        <li id="section-415">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-415">&#182;</a>
              </div>
              <h2>listOf(type)</h2>
<p> Sentinel value for when an list of a particular type is needed:</p>
<pre><code>  listOf(Number)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">listOf</span><span class="params">(type)</span> {</span>
        <span class="keyword">var</span> self = getInstance(<span class="keyword">this</span>, listOf);
        self.type = type;
        <span class="keyword">return</span> self;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-416">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-416">&#182;</a>
              </div>
              <h2>isListOf(a)</h2>
<p> Returns <code>true</code> if <code>a</code> is an instance of <code>listOf</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> isListOf = isInstanceOf(listOf);</pre></div></div>
            
        </li>
        
        
        <li id="section-417">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-417">&#182;</a>
              </div>
              <h3>Fantasy Overload</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fo.unsafeSetValueOf(List.prototype);</pre></div></div>
            
        </li>
        
        
        <li id="section-418">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-418">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'List'</span>, List)
        .property(<span class="string">'Cons'</span>, List.Cons)
        .property(<span class="string">'Nil'</span>, List.Nil)
        .property(<span class="string">'isList'</span>, isList)
        .property(<span class="string">'listOf'</span>, listOf)
        .property(<span class="string">'isListOf'</span>, isListOf)
        .property(<span class="string">'listRange'</span>, List.range)
        .method(<span class="string">'arb'</span>, isListOf, <span class="keyword">function</span>(a, b) {
            <span class="keyword">var</span> accum = [],
                length = <span class="keyword">this</span>.randomRange(<span class="number">0</span>, b),
                i;
    
            <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; length; i++) {
                accum.push(<span class="keyword">this</span>.arb(a.type, b - <span class="number">1</span>));
            }
    
            <span class="keyword">return</span> List.fromArray(accum);
        })
        .method(<span class="string">'shrink'</span>, isList, <span class="keyword">function</span>(a) {
            <span class="keyword">var</span> accum = [List.Nil],
                x = a.size();
    
            <span class="keyword">while</span>(x) {
                x = Math.floor(x / <span class="number">2</span>);
    
                <span class="keyword">if</span> (x) accum.push(a.take(x));
            }
    
            <span class="keyword">return</span> accum;
        })
        .method(<span class="string">'ap'</span>, isList, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.ap(b);
        })
        .method(<span class="string">'chain'</span>, isList, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.chain(b);
        })
        .method(<span class="string">'concat'</span>, isList, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.concat(b);
        })
        .method(<span class="string">'count'</span>, isList, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.count(b);
        })
        .method(<span class="string">'drop'</span>, isList, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.drop(b);
        })
        .method(<span class="string">'dropRight'</span>, isList, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.dropRight(b);
        })
        .method(<span class="string">'dropWhile'</span>, isList, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.dropWhile(b);
        })
        .method(<span class="string">'equal'</span>, isList, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.equal(b);
        })
        .method(<span class="string">'exists'</span>, isList, <span class="keyword">function</span>(a, f) {
            <span class="keyword">return</span> a.exists(f);
        })
        .method(<span class="string">'fold'</span>, isList, <span class="keyword">function</span>(a, f, g) {
            <span class="keyword">return</span> a.fold(f, g);
        })
        .method(<span class="string">'map'</span>, isList, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.map(b);
        })
        .method(<span class="string">'partition'</span>, isList, <span class="keyword">function</span>(a, f) {
            <span class="keyword">return</span> a.partition(f);
        })
        .method(<span class="string">'reduce'</span>, isList, <span class="keyword">function</span>(a, f) {
            <span class="keyword">return</span> a.reduce(f);
        })
        .method(<span class="string">'reduceRight'</span>, isList, <span class="keyword">function</span>(a, f) {
            <span class="keyword">return</span> a.reduceRight(f);
        })
        .method(<span class="string">'take'</span>, isList, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.take(b);
        })
        .method(<span class="string">'takeRight'</span>, isList, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.takeRight(b);
        })
        .method(<span class="string">'zip'</span>, isList, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.zip(b);
        })
        .method(<span class="string">'zipWithIndex'</span>, isList, <span class="keyword">function</span>(a, b) {
            <span class="keyword">return</span> a.zipWithIndex(b);
        })
        .method(<span class="string">'toArray'</span>, isList, <span class="keyword">function</span>(a) {
            <span class="keyword">return</span> a.toArray();
        });

    <span class="comment">/* Bellow includes are optional */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-419">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-419">&#182;</a>
              </div>
              <h2>once</h2>
<p> Stateful function that guarantees that the function is evaluated
 only once. Executes a complex function with arguments once, even
 if called multiple times.</p>
<pre><code>  once(
      function(a) {
          return Math.sin(a);
      }, 1
  )();</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="comment">/* This is really stateful and we should really consider its use. */</span>
    <span class="comment">/* Use with care */</span>
    <span class="function"><span class="keyword">function</span> <span class="title">once</span><span class="params">(f)</span> {</span>
        <span class="comment">/* Create a special lock so we don't have to look for undefined */</span>
        <span class="keyword">var</span> args = rest(arguments).slice(<span class="number">1</span>),
            lock = {},
            val = lock;
    
        <span class="keyword">return</span> <span class="keyword">function</span>() {
            <span class="keyword">if</span> (val === lock) val = f.apply(<span class="literal">null</span>, args);
            <span class="keyword">return</span> val;
        };
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-420">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-420">&#182;</a>
              </div>
              <h2>asyncOnce</h2>
<p> Stateful async function that guarantees that the function is evaluated
 only once. Executes a complex function with arguments once, even
 if called multiple times.</p>
<pre><code>  asyncOnce(
      function(resolve, args) {
          setTimeout(function() {
             resolve(Math.sin(args[0]));
          }, 100);
      }, 1
  )();</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="comment">/* This is really stateful and we should really consider its use. */</span>
    <span class="comment">/* Use with care */</span>
    <span class="function"><span class="keyword">function</span> <span class="title">asyncOnce</span><span class="params">(f)</span> {</span>
        <span class="keyword">var</span> args = rest(arguments).slice(<span class="number">1</span>),
            resolves = [],
            stateful = <span class="keyword">function</span>(args) {
                captured = args;
            },
            invoke = <span class="keyword">function</span>(args) {
                <span class="keyword">var</span> index = resolves.length;
    
                <span class="keyword">while</span>(--index &gt; -<span class="number">1</span>) {
                    optional(resolves.pop()).apply(<span class="literal">null</span>, args);
                }
            },
            deferred = once(<span class="keyword">function</span>() {
                f.apply(<span class="literal">null</span>, [
                    <span class="keyword">function</span>() {
                        <span class="keyword">var</span> args = rest(arguments);
    
                        stateful(args);
                        invoke(args);
                    },
                    args
                ]);
            }),
            captured;
    
        <span class="keyword">return</span> <span class="keyword">function</span>(f) {
            deferred();
    
            <span class="keyword">if</span> (captured) f.apply(<span class="literal">null</span>, captured);
            <span class="keyword">else</span> resolves.push(f);
        };
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-421">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-421">&#182;</a>
              </div>
              <p> append methods to the squishy environment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    squishy = squishy
        .property(<span class="string">'once'</span>, once)
        .property(<span class="string">'asyncOnce'</span>, asyncOnce);

    <span class="comment">/* This is a very greedy method so needs to be employed last */</span>
    squishy = squishy.method(<span class="string">'equal'</span>, isObject, <span class="keyword">function</span>(a, b) {
        <span class="keyword">var</span> i;
        <span class="comment">/* We need to be sure that the there is an `a` and a `b` here. */</span>
        <span class="keyword">if</span> (and(a, b) &amp;&amp; isObject(b)) {
            <span class="comment">/* This would be better if we turn objects into ordered
               arrays so we can pass it through equal(a, b) */</span>
            <span class="keyword">for</span> (i <span class="keyword">in</span> a) {
                <span class="keyword">if</span> (!squishy.equal(a[i], b[i]))
                    <span class="keyword">return</span> <span class="literal">false</span>;
            }
            <span class="keyword">for</span> (i <span class="keyword">in</span> b) {
                <span class="keyword">if</span> (!squishy.equal(b[i], a[i]))
                    <span class="keyword">return</span> <span class="literal">false</span>;
            }
            <span class="keyword">return</span> <span class="literal">true</span>;
        }
        <span class="keyword">return</span> <span class="literal">false</span>;
    });

    <span class="keyword">if</span> (<span class="keyword">typeof</span> exports != <span class="string">'undefined'</span>) {
        <span class="comment">/*jshint node: true*/</span>
        exports = module.exports = squishy;
    } <span class="keyword">else</span> {
        global.squishy = squishy;
    }
})(<span class="keyword">this</span>);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
